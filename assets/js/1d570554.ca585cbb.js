"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4112],{3380:r=>{r.exports=JSON.parse('{"blogPosts":[{"id":"Browser_HTML_Tabs","metadata":{"permalink":"/Web/blog/Browser_HTML_Tabs","source":"@site/blog/20220914_Browser_HTML_Tabs.md","title":"\u95dc\u65bc\u700f\u89bd\u5668\u9801\u7c64\u7684\u90a3\u4e9b\u5c0f\u4e8b\uff0c\u770b\u770b\u4f7f\u7528\u8005\u662f\u5426\u96e2\u958b\u4f60\u7684\u9801\u7c64","description":"\u63d0\u4f9b\u52d5\u614b\u4fee\u6539\u700f\u89bd\u5668\u9801\u7c64\u7684\u5e7e\u500b\u65b9\u6cd5\uff0c\u9054\u5230\u63d0\u9192\u6216\u662f\u8a08\u6578\u529f\u80fd\u3002","date":"2022-09-14T08:51:00.000Z","formattedDate":"September 14, 2022","tags":[{"label":"Html","permalink":"/Web/blog/tags/html"}],"readingTime":4.59,"hasTruncateMarker":true,"authors":[{"name":"WeiJie","imageURL":"./photo.jpg","key":"wj"}],"frontMatter":{"slug":"Browser_HTML_Tabs","title":"\u95dc\u65bc\u700f\u89bd\u5668\u9801\u7c64\u7684\u90a3\u4e9b\u5c0f\u4e8b\uff0c\u770b\u770b\u4f7f\u7528\u8005\u662f\u5426\u96e2\u958b\u4f60\u7684\u9801\u7c64","description":"\u63d0\u4f9b\u52d5\u614b\u4fee\u6539\u700f\u89bd\u5668\u9801\u7c64\u7684\u5e7e\u500b\u65b9\u6cd5\uff0c\u9054\u5230\u63d0\u9192\u6216\u662f\u8a08\u6578\u529f\u80fd\u3002","keywords":["Html Tabs","favico","favico.js"],"authors":"wj","date":"2022-09-14T08:51","tags":["Html"]},"nextItem":{"title":"\u4f7f\u7528 Deta \u670d\u52d9\u6253\u9020\u4e00\u652f TodoList API","permalink":"/Web/blog/20220910_ExpressWithDeta_TodoAPI"}},"content":"## \u524d\u8a00\\r\\n\\r\\n\u5728 Facebook \u7684\u9801\u9762\u4e0a\uff0c\u82e5\u662f\u6709\u4eba\u50b3\u9001 Message \u7d66\u4f60\uff0c\u525b\u597d\u9801\u7c64\u5728 Facebook \u4e0a\u7684\u8a71\u6703\u76f4\u63a5\u7531\u53f3\u4e0b\u65b9\u8ac7\u51fa Message \u804a\u5929\u5ba4\uff0c\u800c\u5728\u5176\u4ed6\u5206\u9801\u6642\u5247\u6703\u770b\u5230 Facebook \u5206\u9801\u51fa\u73fe\u4e86\u672a\u8b80\u6578\u5b57\u4ee5\u53ca\u67d0\u67d0\u67d0\u50b3\u9001\u8a0a\u606f\u7d66\u60a8\u7684\u5b57\u6a23\u3002\u6700\u8fd1\u525b\u597d\u6709\u9019\u6a23\u7684\u9700\u6c42\uff0c\u4e0a\u7db2\u8490\u96c6\u4e86\u4e00\u4e9b\u505a\u6cd5\u4e26\u4e14\u7d00\u9304\u4e0b\u4f86\u3002\\r\\n\\r\\n\u7531\u65bc\u672a\u4f7f\u7528 websocket \u7684\u6280\u8853\uff0c\u6240\u4ee5\u5c31\u4f7f\u7528\u9801\u7c64\u7684\u5207\u63db\u4e8b\u4ef6\u7576\u4f5c\u6a21\u64ec\u4f86\u52d5\u614b\u4fee\u6539\u3002\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n### \u4ecb\u7d39\u9801\u7c64\\r\\n\\r\\n![Tab](../static/img/blog/tab1.jpg)\\r\\n\\r\\n\u5de6\u908a\u6703\u6709\u4e00\u500b\u5c0f\u7684\u5716\u793a\u70ba `favicon.ico`\uff0c\u70ba **Favorites Icon** \u7684\u7e2e\u5beb  \\r\\n\u65e9\u671f\u904b\u7528\u5728\u52a0\u5165\u6211\u7684\u6700\u611b\u8cc7\u6599\u593e\u4e2d\u7684\u7e2e\u5716\uff0c\u5f8c\u671f\u81f3\u4eca\u5df2\u7d93\u6210\u70ba\u700f\u89bd\u5668\u9801\u7c64\u4e0a\u7684\u7e2e\u5716\uff0c\u800c\u50cf\u662f Google \u641c\u5c0b\u6216\u662f\u5206\u9801\u4e5f\u6703\u986f\u793a\u8a72\u5716\u7247\uff0c\u6a94\u6848\u7684\u5c3a\u5bf8\u5e38\u898b\u70ba `16x16` `32x32`\uff0c\u82e5\u8a2d\u5b9a\u9700\u8981\u5c07\u539f\u5716\u7247\u8f49\u6a94\u70ba `.ico` \u6a94\uff0c\u901a\u5e38\u7f6e\u653e\u65bc\u7db2\u7ad9\u7684\u8ddf\u76ee\u9304\u4e0b\uff0c\u5982\u65bc\u5176\u4ed6\u4f4d\u7f6e\u9808\u65bc `<head>` \u4e2d\u6307\u5b9a\\r\\n\\r\\n```html\\r\\n<link rel=\\"icon\\" href=\\"/Web/img/favicon.ico\\" />\\r\\n```\\r\\n\\r\\n\u800c\u53f3\u908a\u6587\u5b57\u7684\u90e8\u5206\u5247\u70ba\u7db2\u7ad9\u7684\u6a19\u984c\uff0c\u901a\u5e38\u4e5f\u6703\u4e00\u4e26\u5efa\u7f6e\u65bc `<head>` \u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 js \u52d5\u614b\u9032\u884c\u8abf\u6574\\r\\n\\r\\n```html\\r\\n<title>Blog | WJ \u958b\u767c\u8e29\u96f7&\u65b0\u9bae\u6771\u897f\u7b46\u8a18\u7ad9</title>\\r\\n```\\r\\n\\r\\n---\\r\\n\\r\\n### \u52d5\u614b\u5207\u63db\u6a19\u984c\\r\\n\\r\\n\u90a3\u9664\u4e86\u539f\u672c\u5c31\u5beb\u597d\u653e\u5728 head \u88e1\u7684 title\uff0c\u82e5\u4eca\u5929\u662f\u52d5\u614b\u7684\u7db2\u9801\u50cf\u662f\u90e8\u843d\u683c\uff0c\u6703\u5c07\u6587\u7ae0\u6a19\u984c\u5f8c\u65b9\u518d\u52a0\u4e0a\u90e8\u843d\u683c\u540d\u7a31\uff0c\u9664\u4e86\u4e00\u7bc7\u4e00\u7bc7\u4fee\u6539\u5916\uff0c\u7528 js \u7684\u65b9\u5f0f\u8abf\u6574\u66f4\u52a0\u7684\u5feb\u901f\\r\\n\\r\\n```js\\r\\ndocument.title = \\"\u63db\u9019\u500b\u6a19\u984c\\";\\r\\n```\\r\\n\\r\\n\u6c92\u932f\uff0c\u5c31\u9019\u6a23\u77ed\u77ed\u7684\u4e00\u884c\uff0c\u50cf\u662f Facebook \u820a\u5f0f\u9801\u9762\u4e0a\u7684 websocket \u63a5\u6536\u5230\u6709\u4eba\u65b9\u9001 Message \u5c31\u6703\u57f7\u884c title \u7684\u5207\u63db\uff0c\u800c\u5df2\u8b80\u8a0a\u606f\u518d\u5207\u63db\u56de Facebook\u3002\\r\\n\u9019\u908a\u5c31\u7528\u5207\u63db\u9801\u7c64\u4e8b\u4ef6\u7576\u4f5c\u7bc4\u4f8b\u5427\\r\\n\\r\\n```js\\r\\nwindow.addEventListener(\\"focus\\", () => {\\r\\n  document.title = \\"\u4f60\u73fe\u5728\u6b63\u5728\u770b\u8457\u5462\\";\\r\\n});\\r\\nwindow.addEventListener(\\"blur\\", () => {\\r\\n  document.title = \\"\u4f60\u600e\u9ebc\u4e0d\u770b\u4e86\u5462\\";\\r\\n});\\r\\n```\\r\\n\\r\\n\u9019\u908a\u7d81\u5b9a window \u7684 `focus` \u53ca `blur` \u4e8b\u4ef6\uff0c\u5206\u5225\u89f8\u767c\u5728\u6211\u9032\u5165\u4ee5\u53ca\u96e2\u958b\u9801\u7c64\u7684\u6642\u6a5f\u9ede\u3002\\r\\n\\r\\n![Tab](../static/img/blog/tab_check.gif)\\r\\n\\r\\n\u76f8\u540c\u7684\u9700\u6c42\u4f7f\u7528 `visibilitychange` \u4e00\u6a23\u80fd\u505a\u5230\\r\\n\\r\\n```js\\r\\ndocument.addEventListener(\\"visibilitychange\\", () => {\\r\\n  let status = document.visibilityState;\\r\\n  document.title = status == \\"visible\\" ? \\"\u4f60\u73fe\u5728\u6b63\u5728\u770b\u8457\u5462\\" : \\"\u4f60\u600e\u9ebc\u4e0d\u770b\u4e86\u5462\\";\\r\\n});\\r\\n```\\r\\n\\r\\n###\\r\\n\\r\\n### \u52d5\u614b\u5207\u63db\u5716\u793a\\r\\n\\r\\n\u6bd4\u8f03\u967d\u6625\u7684\u5c31\u662f\u5148\u7528 js \u5c0b\u627e\u662f icon \u7684 link \u9805\u76ee\uff0c\u4e26\u52d5\u614b\u66ff\u63db\u6389\u5716\u7247\u7db2\u5740\\r\\n\\r\\n```js\\r\\nvar link =\\r\\n  document.querySelector(\\"link[rel*=\'icon\']\\") || document.createElement(\\"link\\");\\r\\nlink.type = \\"image/x-icon\\";\\r\\nlink.rel = \\"shortcut icon\\";\\r\\nlink.href = \\"https://docusaurus.io/zh-CN/img/docusaurus.png\\";\\r\\ndocument.getElementsByTagName(\\"head\\")[0].appendChild(link);\\r\\n```\\r\\n\\r\\n\u628a\u4e0a\u9762\u7a0b\u5f0f\u78bc\u7528 F12 \u4e3b\u63a7\u53f0\u958b\u8d77\u4f86\u8cbc\u4e0a\uff0c\u9019\u500b\u9801\u9762\u7684\u5716\u793a\u61c9\u8a72\u5c31\u8b8a\u6210\u5c0f\u6050\u9f8d\u4e86\\r\\n\\r\\n\u5982\u679c\u8981\u5728\u7a0d\u5fae\u9032\u968e\u7684\u529f\u80fd\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u9019\u500b plugin\\r\\n\\r\\n> [favico.js](http://lab.ejci.net/favico.js/)\\r\\n\\r\\n`favico.js` \u63d0\u4f9b\u4e86\u5716\u793a\u7684\u66f4\u63db\u3001\u8a08\u6578\u529f\u80fd\u7684\u80cc\u666f\u6587\u5b57\u984f\u8272\uff0c\u751a\u81f3\u9084\u8a2d\u7f6e\u52d5\u756b\u3002\\r\\n\\r\\n![favico](../static/img/blog/favico.JPG)\\r\\n\\r\\n#### \u5c07 icon \u8a2d\u5b9a\u70ba\u67d0\u500b element \u5716\u7247\\r\\n\\r\\n```js\\r\\nvar favicon = new Favico();\\r\\nvar image = document.getElementById(\\"imageId\\");\\r\\nfavicon.image(image);\\r\\n```\\r\\n\\r\\n#### \u5c07 icon \u8a2d\u5b9a\u70ba html5 \u7684 video\\r\\n\\r\\n```js\\r\\nvar favicon = new Favico();\\r\\nvar video = document.getElementById(\\"videoId\\");\\r\\nfavicon.video(video);\\r\\n// favicon.video(\'stop\');\\r\\n```\\r\\n\\r\\n#### \u5c07 icon \u8a2d\u5b9a\u70ba\u7db2\u8def\u651d\u5f71\u6a5f\u7684\u5167\u5bb9\\r\\n\\r\\n```js\\r\\nvar favicon = new Favico();\\r\\nfavicon.webcam();\\r\\n//favicon.webcam(\'stop\');\\r\\n```\\r\\n\\r\\n#### \u8a2d\u7f6e\u8a08\u6578 Badge\\r\\n\\r\\n```js\\r\\nvar favicon = new Favico({\\r\\n  animation: \\"slide\\",\\r\\n});\\r\\nfavicon.badge(1); // \u6578\u91cf\\r\\n```\\r\\n\\r\\n\u8a73\u7d30\u7684 setting object \u5982\u4e0b\\r\\n\\r\\n|    \u5c6c\u6027    |                                                     \u8aaa\u660e                                                      |\\r\\n| :--------: | :-----------------------------------------------------------------------------------------------------------: |\\r\\n|  bgColor   |                                                 \u80cc\u666f\u8272 (#d00)                                                 |\\r\\n| textColor  |                                                 \u6587\u5b57\u8272 (#fff)                                                 |\\r\\n| fontFamily |                           \u5b57\u9ad4 (Arial, Verdana, Times New Roman, serif, sans-serif)                           |\\r\\n| fontStyle  | \u5b57\u9ad4\u7c97\u9ad4\u3001\u659c\u9ad4 (normal, italic, oblique, bold, bolder, lighter, 100, 200, 300, 400, 500, 600, 700, 800, 900)  |\\r\\n|    type    |                                       \u70ba\u5713\u5f62\u6216\u65b9\u5f62 (circle, rectangle)                                        |\\r\\n|  position  |                                       \u986f\u793a\u4f4d\u7f6e (up, down, left, upleft)                                       |\\r\\n| animation  | \u8b8a\u66f4\u6642\u52d5\u756b\u6548\u679c\uff0c\u53ef\u65bc[favico.js \u7db2\u7ad9](http://lab.ejci.net/favico.js/)\u4e2d\u9810\u89bd (slide, fade, pop, popFade, none ) |\\r\\n| elementId  |                                 elementId \u5982\u679c\u9700\u8981\u66ff\u63db\u6210 element \u4e2d\u7684\u5716\u7247\u4f7f\u7528                                 |\\r\\n\\r\\n###"},{"id":"20220910_ExpressWithDeta_TodoAPI","metadata":{"permalink":"/Web/blog/20220910_ExpressWithDeta_TodoAPI","source":"@site/blog/20220910_ExpressWithDeta_TodoAPI.md","title":"\u4f7f\u7528 Deta \u670d\u52d9\u6253\u9020\u4e00\u652f TodoList API","description":"\u56e0\u70ba Heroku \u7684\u514d\u8cbb\u65b9\u6848\u5373\u5c07\u5230\u671f\uff0c\u6240\u4ee5\u627e\u4e86\u4e00\u500b\u514d\u8cbb\u7684\u66ff\u4ee3\u670d\u52d9 Deta\uff0c\u7528 Todos API \u4f86\u7df4\u7fd2\u3002","date":"2022-09-10T11:23:00.000Z","formattedDate":"September 10, 2022","tags":[{"label":"Node.js","permalink":"/Web/blog/tags/node-js"},{"label":"Express.js","permalink":"/Web/blog/tags/express-js"},{"label":"Deta","permalink":"/Web/blog/tags/deta"}],"readingTime":8.94,"hasTruncateMarker":true,"authors":[{"name":"WeiJie","imageURL":"./photo.jpg","key":"wj"}],"frontMatter":{"slug":"20220910_ExpressWithDeta_TodoAPI","title":"\u4f7f\u7528 Deta \u670d\u52d9\u6253\u9020\u4e00\u652f TodoList API","description":"\u56e0\u70ba Heroku \u7684\u514d\u8cbb\u65b9\u6848\u5373\u5c07\u5230\u671f\uff0c\u6240\u4ee5\u627e\u4e86\u4e00\u500b\u514d\u8cbb\u7684\u66ff\u4ee3\u670d\u52d9 Deta\uff0c\u7528 Todos API \u4f86\u7df4\u7fd2\u3002","authors":"wj","date":"2022-09-10T11:23","tags":["Node.js","Express.js","Deta"]},"prevItem":{"title":"\u95dc\u65bc\u700f\u89bd\u5668\u9801\u7c64\u7684\u90a3\u4e9b\u5c0f\u4e8b\uff0c\u770b\u770b\u4f7f\u7528\u8005\u662f\u5426\u96e2\u958b\u4f60\u7684\u9801\u7c64","permalink":"/Web/blog/Browser_HTML_Tabs"},"nextItem":{"title":"\u4f7f\u7528 puppeteer \u53d6\u5f97 ig \u5716\u7247 & \u5167\u5bb9","permalink":"/Web/blog/Puppeteer_GetInstagram"}},"content":"## \u524d\u8a00\\r\\n\\r\\n\u8fd1\u671f\u56e0\u70ba Heroku <strike style={{color:\\"red\\"}}>\u990a\u5957\u6bba</strike> \u514d\u8cbb\u65b9\u6848\u5373\u5c07\u4e0b\u67b6\u7684\u7de3\u6545\uff0c\u66ab\u6642\u6c92\u6709\u4e00\u500b\u53ef\u4ee5\u514d\u8cbb\u90e8\u5c6c node \u76f8\u95dc\u7a0b\u5f0f\u7684\u5730\u65b9\uff0c\u6240\u4ee5\u722c\u6587\u5f8c\u627e\u5230\u4e86 Deta\uff0c\u767c\u73fe\u9664\u4e86[\u9650\u5236\u591a\u4e86\u4e00\u9ede\u4e4b\u5916](https://weij0.github.io/Web/docs/Deta/intro)\uff0c\u62ff\u4f86\u7df4\u7fd2\u9084\u662f\u64cb\u5f97\u4f4f\u7684\u3002\\r\\n\\r\\n\u6240\u4ee5\u518d\u5b78\u7fd2\u7684\u7b2c\u4e00\u500b\u76ee\u6a19\uff0c\u5c31\u662f\u7528 Deta \u5efa\u7acb\u4e00\u500b Todos \u7684 API \u4e26\u90e8\u5c6c\u4e0a\u53bb Deta\\r\\n\\r\\n## \u74b0\u5883\u5efa\u7f6e\\r\\n\\r\\n\u74b0\u5883\u5efa\u7f6e\u7684\u90e8\u5206\u9700\u8981\u5b89\u88dd Deta \u53ca\u5efa\u7acb\u4e00\u500b [Deta Base](https://weij0.github.io/Web/docs/Deta/Deta_Base) \u548c [Deta Micros](https://weij0.github.io/Web/docs/Deta/Deta_Micros) \uff0c\u5728\u7b46\u8a18\u5340\u5df2\u5404\u5beb\u5b8c\u4e00\u4efd\u6559\u5b78\u53ef\u4ee5\u53c3\u95b1\u8457\u57f7\u884c\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n## \u5efa\u7acb Express.js \u74b0\u5883\\r\\n\\r\\n\u82e5\u53c3\u7167\u8457 [Deta Micros](https://weij0.github.io/Web/docs/Deta/Deta_Micros) \u6587\u7ae0\u6700\u5f8c\u4e00\u500b\u5df2\u7d93\u6210\u529f\u5efa\u7acb\u4e00\u500b Deta \u7db2\u7ad9  \\r\\n\u4e26\u53ef\u4ee5\u6210\u529f\u770b\u5230 Hello World \u4e86\u3002 \u9019\u6642\u5019\u5c31\u8981\u4f86\u5beb Express Todos API \u7684\u5167\u5bb9\uff0c\u5148\u63d0\u4f9b\u9700\u8981\u5efa\u7f6e\u7684\u67b6\u69cb\\r\\n\\r\\n- \u53d6\u5f97 Todos \u5217\u8868\\r\\n- \u65b0\u589e Todo\\r\\n- \u4fee\u6539 Todo \u72c0\u614b (\u672a\u5b8c\u6210/\u5b8c\u6210)\\r\\n- \u522a\u9664 Todo\\r\\n\\r\\n\u90a3\u5728\u5efa\u7acb\u4ee5\u4e0a\u7684 API \u524d\uff0c\u9700\u8981\u505a\u4e00\u4e9b Express \u7684\u524d\u7f6e\u4f5c\u696d\uff0c\u8b93\u4f3a\u670d\u5668\u74b0\u5883\u80fd\u5920\u9806\u5229\u88ab Request\\r\\n\\r\\n```shell\\r\\nnpm install cors\\r\\n```\\r\\n\\r\\n`cors`\uff0c\u7528\u4f86\u89e3\u6c7a Request \u7684 [cors](https://weij0.github.io/Web/docs/Deta/Deta_Micros) \u5b58\u53d6\u554f\u984c\\r\\n\\r\\n```js title=\\"index.js\\"\\r\\nconst express = require(\\"express\\");\\r\\nconst cors = require(\\"cors\\");\\r\\n\\r\\nconst { Deta } = require(\\"deta\\");\\r\\nconst deta = Deta([\\"PROJECT_KEY\\"]);\\r\\nconst db = deta.Base(\\"todos\\");\\r\\n\\r\\nconst app = express();\\r\\napp.use(express.json());\\r\\napp.use(cors());\\r\\n```\\r\\n\\r\\n---\\r\\n\\r\\n## \u5efa\u7f6e Todo API\\r\\n\\r\\n### \u53d6\u5f97\u6240\u6709 Todo\\r\\n\\r\\n\u5728 [Deta Base \u5fae\u578b NoSQL - \u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5 \u53d6\u5f97\u8cc7\u6599 get or fetch](https://weij0.github.io/Web/docs/Deta/Deta_Base#%E5%8F%96%E5%BE%97%E8%B3%87%E6%96%99-get-or-fetch) \u6709\u63d0\u5230\uff0c\u82e5\u8981\u53d6\u5f97\u4e0d\u53ea\u4e00\u7b46\u7684\u8cc7\u6599\u6642\u5f97\u4f7f\u7528 fetch  \\r\\n\u800c\u56e0\u70ba fetch \u6709\u55ae\u6b21\u5b58\u53d6\u5927\u5c0f 1MB \u9650\u5236\uff0c\u6240\u4ee5\u9700\u8981\u7528\u8ff4\u5708\u7684\u65b9\u5f0f\u53bb\u7d50\u5408\u8cc7\u6599\u4e26\u56de\u50b3\uff0c\u6240\u4ee5\u9019\u908a\u5beb\u4e86\u4e00\u500b\u51fd\u5f0f\\r\\n\\r\\n- queryObject \u70ba\u7be9\u9078\u7684\u689d\u4ef6\uff0c\u82e5\u6c92\u6709\u50b3\u5165\u5c31\u662f\u7a7a\u9663\u5217\uff0c\u4ee3\u8868\u53d6\u5f97\u6240\u6709\u8cc7\u6599\u7684\u610f\u601d\\r\\n\\r\\n```js\\r\\nconst fetchDBData = async (queryObject = {}) => {\\r\\n  let list = await db.fetch(queryObject);\\r\\n  let allItems = await list.items;\\r\\n\\r\\n  while (list.last) {\\r\\n    list = await db.fetch(queryObject, { last: list.last });\\r\\n    allItems = allItems.concat(list.items);\\r\\n  }\\r\\n\\r\\n  return allItems;\\r\\n};\\r\\n```\\r\\n\\r\\n\u82e5\u4ee5 GET \u7684\u65b9\u5f0f\u5b58\u53d6 `/todos/` \u5247\u56de\u50b3\u6240\u6709 Todo\uff0c\u800c\u5728\u56de\u50b3\u7684\u683c\u5f0f\u4e5f\u591a\u52a0\u4e86\u4e00\u500b `success` \u7684 boolean \u8b93\u524d\u7aef\u66f4\u65b9\u4fbf\u5224\u65b7\u662f\u5426\u6210\u529f\\r\\n\\r\\n- `/todos/`\\r\\n\\r\\n```js title=\\"index.js\\"\\r\\napp.get(\\"/todos/\\", async (req, res) => {\\r\\n  res.json({ success: true, message: await fetchDBData() });\\r\\n});\\r\\n```\\r\\n\\r\\n###\\r\\n\\r\\n### \u65b0\u589e\u4e00\u7b46 Todo \u8cc7\u6599\\r\\n\\r\\n\u53c3\u8003 [Deta Base \u5fae\u578b NoSQL - \u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5 \u53d6\u5f97\u8cc7\u6599 put & putMany &insert](https://weij0.github.io/Web/docs/Deta/Deta_Base#%E6%96%B0%E5%A2%9E%E8%B3%87%E6%96%99-put--putmany--insert) \uff0c\u56e0\u70ba\u6548\u80fd\u53ca\u4e0d\u6703\u8fd4\u56de\u5947\u602a\u932f\u8aa4\u6240\u4ee5\u4f7f\u7528\u4e86 `put` \u7684\u529f\u80fd\\r\\n\\r\\n\u9019\u908a\u6709\u591a\u505a\u4e86\u4e00\u4e9b\u8655\u7406\u5982\u4e0b\uff1a\\r\\n\\r\\n- `/todos/add`\uff0c\u53c3\u6578\u70ba content `[string]` \u5167\u5bb9 \u53ca inFinished `[boolean]` \u662f\u5426\u5b8c\u6210\\r\\n- \u907f\u514d\u585e\u5165\u7a7a\u503c\u65bc\u8cc7\u6599\u5eab\u4e2d\uff0c\u6240\u4ee5\u5224\u65b7\u4e86\u5167\u5bb9\u6b04\u4f4d\u662f\u5426\u6709\u50b3\u5165\u3002\\r\\n- \u82e5\u662f\u5426\u5b8c\u6210\u9019\u500b\u6b04\u4f4d\u6c92\u6709\u50b3\u5165\u503c\uff0c\u5247\u9810\u8a2d\u662f\u672a\u5b8c\u6210\u3002\\r\\n- \u4f7f\u7528\u4e86 try catch \u907f\u514d\u65bc deta-base \u64cd\u4f5c\u4e0a\u767c\u751f\u9810\u6599\u5916\u7684\u932f\u8aa4\\r\\n\\r\\n```js title=\\"index.js\\"\\r\\napp.post(\\"/todos/add\\", async (req, res) => {\\r\\n  const { content, isFinished = false } = req.body;\\r\\n\\r\\n  if (!content) {\\r\\n    res.status(200).json({ success: false, message: \\"\u8acb\u8f38\u5165\u5167\u5bb9\\" });\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  try {\\r\\n    const result = await db.put({ content, isFinished });\\r\\n    res.status(201).json({ success: true, message: result });\\r\\n  } catch (ex) {\\r\\n    await res.json({ success: false, message: ex });\\r\\n  }\\r\\n});\\r\\n```\\r\\n\\r\\n###\\r\\n\\r\\n### \u5207\u63db Todo \u5b8c\u6210\u72c0\u614b\\r\\n\\r\\n\u53c3\u8003 [Deta Base \u5fae\u578b NoSQL - \u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5 \u66f4\u65b0\u8cc7\u6599 put & update](https://weij0.github.io/Web/docs/Deta/Deta_Base#%E6%9B%B4%E6%96%B0%E8%B3%87%E6%96%99-put--update) \u4f7f\u7528 `update` \u5b8c\u6210\\r\\n\\r\\n- `/todos/:id`\\r\\n- \u9700\u5224\u65b7\u662f\u5426\u50b3\u5165 `id` \u4e5f\u5c31\u662f key \u503c\uff0c\u82e5\u6c92\u6709\u7684\u8a71 `update` \u6703\u767c\u751f\u932f\u8aa4\uff0c\u6240\u4ee5\u8981\u9810\u5148\u5224\u65b7\u64cb\u6389\\r\\n- \u548c\u4e0a\u9762\u4e00\u9ede\u76f8\u540c\uff0c\u82e5\u50b3\u5165\u4e86 key \u503c\uff0c\u4f46\u8cc7\u6599\u5eab\u88cf\u9762\u6c92\u6709\u8a72\u7b46 key \u503c\u4e00\u6a23\u6703 `update`\u932f\u8aa4\uff0c\u6240\u4ee5\u8981\u5148\u770b\u5b58\u4e0d\u5b58\u5728\\r\\n\\r\\n```js title=\\"index.js\\"\\r\\napp.patch(\\"/todos/:id\\", async (req, res) => {\\r\\n  const { id } = req.params;\\r\\n\\r\\n  if (!id) {\\r\\n    await res.json({ success: false, message: \\"\u9700\u8981\u8f38\u5165 id\\" });\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  const item = await db.get(id);\\r\\n\\r\\n  if (!item) {\\r\\n    await res.json({ success: false, message: \\"\u67e5\u7121\u8a72ID\u8cc7\u6599\\" });\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  try {\\r\\n    const update = { isFinished: !item.isFinished };\\r\\n    const result = await db.update(update, id);\\r\\n    await res.json({ success: true, message: result });\\r\\n  } catch (ex) {\\r\\n    await res.json({ success: false, message: ex });\\r\\n  }\\r\\n});\\r\\n```\\r\\n\\r\\n### \u522a\u9664 Todo\\r\\n\\r\\n\u53c3\u8003 [Deta Base \u5fae\u578b NoSQL - \u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5 \u522a\u9664\u8cc7\u6599 delete](https://weij0.github.io/Web/docs/Deta/Deta_Base#%E5%88%AA%E9%99%A4%E8%B3%87%E6%96%99-delete) \u4f7f\u7528 `delete` \u5b8c\u6210\\r\\n\\r\\n- `/todos/:id`\\r\\n- \u4e00\u6a23\u5224\u65b7\u662f\u5426\u50b3\u5165 `id`\uff0c\u82e5\u6c92\u6709\u7684\u8a71\u9810\u5148\u5224\u65b7\u64cb\u6389\\r\\n\\r\\n```js title=\\"index.js\\"\\r\\napp.delete(\\"/todos/:id\\", async (req, res) => {\\r\\n  const { id } = req.params;\\r\\n\\r\\n  if (!id) {\\r\\n    await res.json({ success: false, message: \\"\u9700\u8981\u8f38\u5165 id\\" });\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  try {\\r\\n    const result = await db.delete(id);\\r\\n    await res.json({ success: true, message: result });\\r\\n  } catch (ex) {\\r\\n    await res.json({ success: false, message: ex });\\r\\n  }\\r\\n});\\r\\n```\\r\\n\\r\\n###\\r\\n\\r\\n### \u522a\u9664\u5df2\u5b8c\u6210\u7684 Todo\\r\\n\\r\\n\u540c\u5834\u52a0\u6620\uff0c\u56e0\u70ba\u6703\u4f7f\u7528\u4e4b\u524d\u65bc\u516d\u89d2\u5b78\u9662 React \u76f4\u64ad\u73ed\u5efa\u7acb\u7684 TodoList \u4f5c\u696d\u4e0a\uff0c\u88e1\u9762\u6709\u4e00\u500b\u529f\u80fd\u5c31\u662f\u522a\u9664\u5df2\u5b8c\u6210\u7684\u9805\u76ee\uff0c\u539f\u672c\u7684 API \u662f\u6c92\u6709\u8a72\u529f\u80fd\u7684\uff0c\\r\\n\u6240\u4ee5\u9700\u8981\u7528\u8ff4\u5708\u53bb\u57f7\u884c API\uff0c\u4e0d\u904e\u73fe\u5728\u81ea\u5df1\u958b API \u4e86\u5c31\u53ef\u4ee5\u5efa\u7f6e\u4e00\u652f\u9019\u6a23\u7684\u529f\u80fd\uff0c\u524d\u53f0\u5c31\u53ea\u8981 request \u4e00\u6b21\u5c31\u597d\u3002\\r\\n\\r\\n\u5148\u53d6\u5f97\u5df2\u5b8c\u6210\u7684\u6240\u6709\u9805\u76ee\uff0c\u4e00\u6a23\u4f7f\u7528\u8ff4\u5708\u9032\u884c\u522a\u9664\\r\\n\\r\\n```js title=\\"index.js\\"\\r\\napp.delete(\\"/todos/all\\", async (req, res) => {\\r\\n  try {\\r\\n    const items = await fetchDBData({ isFinished: true });\\r\\n    items\\r\\n      .map((item) => item.key)\\r\\n      .forEach(async (key) => {\\r\\n        await db.delete(key);\\r\\n      });\\r\\n    await res.json({ success: true, message: \\"\\" });\\r\\n  } catch (ex) {\\r\\n    await res.json({ success: false, message: ex });\\r\\n  }\\r\\n});\\r\\n```\\r\\n\\r\\n## \u958b\u767c\u6a21\u5f0f\u8207\u90e8\u5c6c\u6a21\u5f0f\\r\\n\\r\\n\u5728\u958b\u767c\u6a21\u5f0f\u4e0b\u662f\u4f7f\u7528 Express \u7684 server \u529f\u80fd\uff0c\u5728 localhost \u74b0\u5883\u4e0b\u7528 `js fetch` \u6216 `postman` \u53bb\u6e2c\u8a66\u7684\uff0c\u6240\u4ee5\u7a0b\u5f0f\u78bc\u8981\u6539\u70ba\\r\\n\\r\\n```js title=\\"index.js\\"\\r\\napp.listen(3032, () => {\\r\\n  console.log(\\"server is running\\");\\r\\n});\\r\\n\\r\\nmodule.exports = app;\\r\\n```\\r\\n\\r\\n\u4e26\u57f7\u884c \\r\\n\\r\\n```shell\\r\\nnode index\\r\\n```\\r\\n\\r\\n\u7b49\u5230\u6b63\u5f0f\u8981\u90e8\u5c6c\u4e0a deta \u6642\u518d\u5c07 app.listen \u9019\u6bb5\u8a3b\u89e3\uff0c\u6539\u7528 module.exports = app;\\r\\n\\r\\n```js title=\\"index.js\\"\\r\\n//app.listen(3032, () => {\\r\\n//  console.log(\\"server is running\\");\\r\\n//});\\r\\nmodule.exports = app;\\r\\n```\\r\\n\\r\\n## \u5b8c\u6574\u7a0b\u5f0f\u78bc\\r\\n\\r\\n\u540c\u6b65\u653e\u7f6e\u65bc [Github](https://github.com/WeiJ0/deta-micros-todolist-api) \u4e0a\uff0c\u53ef\u4ee5\u76f4\u63a5 clone \u57f7\u884c\\r\\n\\r\\n:::caution\\r\\n\u50c5\u9700\u8981\u6ce8\u610f\u4e00\u9ede\u662f `DELETE /todos/all` \u9700\u8981\u653e\u7f6e\u5728 `DELETE /todos/:id` \u4e4b\u524d\uff0c\u5426\u5247 `all` \u6703\u88ab\u7576\u4f5c id \u50b3\u5165\u3002\\r\\n:::\\r\\n\\r\\n```js\\r\\nrequire(\\"dotenv\\").config();\\r\\nconst express = require(\\"express\\");\\r\\nconst bodyParser = require(\\"body-parser\\");\\r\\nconst cors = require(\\"cors\\");\\r\\n\\r\\nconst { Deta } = require(\\"deta\\");\\r\\nconst deta = Deta(process.env.PROJECT_KEY);\\r\\nconst db = deta.Base(\\"todos\\");\\r\\n\\r\\nconst app = express();\\r\\n\\r\\napp.use(\\r\\n  bodyParser.urlencoded({\\r\\n    extended: true,\\r\\n  })\\r\\n);\\r\\napp.use(bodyParser.json());\\r\\napp.use(express.json());\\r\\napp.use(cors());\\r\\n\\r\\napp.get(\\"/\\", (req, res) => res.send(\\"Hello World!\\"));\\r\\n\\r\\nconst fetchDBData = async (queryObject = {}) => {\\r\\n  let list = await db.fetch(queryObject);\\r\\n  let allItems = await list.items;\\r\\n\\r\\n  while (list.last) {\\r\\n    list = await db.fetch(queryObject, { last: list.last });\\r\\n    allItems = allItems.concat(list.items);\\r\\n  }\\r\\n\\r\\n  return allItems;\\r\\n};\\r\\n\\r\\napp.get(\\"/todos/\\", async (req, res) => {\\r\\n  res.json({ success: true, message: await fetchDBData() });\\r\\n});\\r\\n\\r\\napp.post(\\"/todos/add\\", async (req, res) => {\\r\\n  const { content, isFinished = false } = req.body;\\r\\n\\r\\n  if (!content) {\\r\\n    res.status(200).json({ success: false, message: \\"\u8acb\u8f38\u5165\u5167\u5bb9\\" });\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  try {\\r\\n    const result = await db.put({ content, isFinished });\\r\\n    res.status(201).json({ success: true, message: result });\\r\\n  } catch (ex) {\\r\\n    await res.json({ success: false, message: ex });\\r\\n  }\\r\\n});\\r\\n\\r\\napp.patch(\\"/todos/:id\\", async (req, res) => {\\r\\n  const { id } = req.params;\\r\\n\\r\\n  if (!id) {\\r\\n    await res.json({ success: false, message: \\"\u9700\u8981\u8f38\u5165 id\\" });\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  const item = await db.get(id);\\r\\n\\r\\n  if (!item) {\\r\\n    await res.json({ success: false, message: \\"\u67e5\u7121\u8a72ID\u8cc7\u6599\\" });\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  try {\\r\\n    const update = { isFinished: !item.isFinished };\\r\\n    const result = await db.update(update, id);\\r\\n    await res.json({ success: true, message: result });\\r\\n  } catch (ex) {\\r\\n    await res.json({ success: false, message: ex });\\r\\n  }\\r\\n});\\r\\n\\r\\napp.delete(\\"/todos/all\\", async (req, res) => {\\r\\n  try {\\r\\n    const items = await fetchDBData({ isFinished: true });\\r\\n    items\\r\\n      .map((item) => item.key)\\r\\n      .forEach(async (key) => {\\r\\n        await db.delete(key);\\r\\n      });\\r\\n    await res.json({ success: true, message: \\"\\" });\\r\\n  } catch (ex) {\\r\\n    await res.json({ success: false, message: ex });\\r\\n  }\\r\\n});\\r\\n\\r\\napp.delete(\\"/todos/:id\\", async (req, res) => {\\r\\n  const { id } = req.params;\\r\\n\\r\\n  if (!id) {\\r\\n    await res.json({ success: false, message: \\"\u9700\u8981\u8f38\u5165 id\\" });\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  try {\\r\\n    const result = await db.delete(id);\\r\\n    await res.json({ success: true, message: result });\\r\\n  } catch (ex) {\\r\\n    await res.json({ success: false, message: ex });\\r\\n  }\\r\\n});\\r\\n\\r\\n/* \u958b\u767c\u4f7f\u7528 */\\r\\n/* app.listen(3032, () => {\\r\\n  console.log(\\"server is running\\");\\r\\n}); */\\r\\n\\r\\nmodule.exports = app;\\r\\n```\\r\\n\\r\\n## Demo Codepen\\r\\n\\r\\n<iframe height=\\"800\\" style={{width: \\"100%\\"}} scrolling=\\"no\\" title=\\"React-Todolist-with -Deta API\\" src=\\"https://codepen.io/weijlin/embed/preview/bGMpeNG?default-tab=js%2Cresult\\" frameborder=\\"no\\" loading=\\"lazy\\" allowtransparency=\\"true\\" allowfullscreen=\\"true\\">\\r\\n  See the Pen <a href=\\"https://codepen.io/weijlin/pen/bGMpeNG\\">\\r\\n  React-Todolist-with -Deta API</a> by wei jie lin  (<a href=\\"https://codepen.io/weijlin\\">@weijlin</a>)\\r\\n  on <a href=\\"https://codepen.io\\">CodePen</a>.\\r\\n</iframe>"},{"id":"Puppeteer_GetInstagram","metadata":{"permalink":"/Web/blog/Puppeteer_GetInstagram","source":"@site/blog/20220910_Puppeteer_GetInstagram.md","title":"\u4f7f\u7528 puppeteer \u53d6\u5f97 ig \u5716\u7247 & \u5167\u5bb9","description":"\u56e0\u70ba IG \u539f\u672c\u516c\u958b api \\"?__a=1\\" \u5df2\u7d93\u88ab\u53d6\u6d88\uff0c\u6240\u4ee5\u4f7f\u7528 puppeteer \u4f86\u6293\u53d6\u9700\u8981\u7684\u8cc7\u6599","date":"2022-09-10T11:23:00.000Z","formattedDate":"September 10, 2022","tags":[{"label":"Node.js","permalink":"/Web/blog/tags/node-js"},{"label":"Puppeteer","permalink":"/Web/blog/tags/puppeteer"}],"readingTime":4.91,"hasTruncateMarker":true,"authors":[{"name":"WeiJie","imageURL":"./photo.jpg","key":"wj"}],"frontMatter":{"slug":"Puppeteer_GetInstagram","title":"\u4f7f\u7528 puppeteer \u53d6\u5f97 ig \u5716\u7247 & \u5167\u5bb9","description":"\u56e0\u70ba IG \u539f\u672c\u516c\u958b api \\"?__a=1\\" \u5df2\u7d93\u88ab\u53d6\u6d88\uff0c\u6240\u4ee5\u4f7f\u7528 puppeteer \u4f86\u6293\u53d6\u9700\u8981\u7684\u8cc7\u6599","authors":"wj","date":"2022-09-10T11:23","tags":["Node.js","Puppeteer"]},"prevItem":{"title":"\u4f7f\u7528 Deta \u670d\u52d9\u6253\u9020\u4e00\u652f TodoList API","permalink":"/Web/blog/20220910_ExpressWithDeta_TodoAPI"},"nextItem":{"title":"\u5229\u7528 Google Apps Script \u76e3\u63a7\u7db2\u7ad9\uff0c\u4e26\u4f7f\u7528 Line Notify \u901a\u77e5","permalink":"/Web/blog/LineNotify_GoogleAppScript"}},"content":"## \u524d\u8a00\\r\\n\\r\\n\u5728\u5e74\u521d\u56e0\u61c9\u516c\u53f8\u5b98\u7db2\u6539\u7248\uff0c\u9700\u8981\u5728\u5b98\u7db2\u4e2d\u5d4c\u5165 instagram \u7684\u8cc7\u6599\uff0c\u65bc\u662f\u4e0a\u7db2\u627e\u4e86\u4e9b\u8cc7\u6599\u767c\u73fe ig \u6709\u63d0\u4f9b\u516c\u958b\u7684 JSON API\u3002\\r\\n\\r\\n> https://www.instagram.com/\u516c\u958b\u5e33\u865f\u7684id/?__a=1\\r\\n\\r\\n\u6574\u9ad4\u6d41\u7a0b\u70ba\u4f7f\u7528 puppeteer \u5230 ig \u6293\u53d6\u6700\u65b0\u7684\u4e5d\u5247\u8cbc\u6587\u5716\u7247\u53ca\u5167\u5bb9\uff0c\u56e0\u70ba JSON API \u4e2d\u7684\u5716\u7247\u9023\u7d50\u7121\u6cd5\u5728\u9650\u5b9a\u7684\u7db2\u57df\u88ab\u8b80\u53d6\uff0c\u6240\u4ee5\u5716\u7247\u5f97\u53e6\u5916\u8655\u7406\u3002\\r\\n\\r\\n\u4e0d\u904e\u8fd1\u671f\u88ab\u544a\u77e5\u8cbc\u6587\u4e00\u76f4\u6c92\u6709\u66f4\u65b0\uff0c\u91cd\u65b0 run puppeteer \u624d\u77e5\u9053 API \u639b\u4e86\u3002\u539f\u56e0\u770b\u4f86\u662f meta \u6536\u8cfc ig \u5f8c\u6709\u505a API \u8abf\u6574\uff0c\u76ee\u524d\u9700\u8981\u4ee5\u8a72\u5e33\u865f\u7684\u6b0a\u9650\u5230 Facebook \u7533\u8acb Token\uff0c\u4e0d\u904e\u516c\u53f8\u7684\u67b6\u69cb\u6b0a\u9650\u7684\u554f\u984c\u9084\u8981\u53e6\u5916\u63d0\u51fa\u8aaa\u660e\u53ca\u7533\u8acb\uff0c\u6240\u4ee5\u5c31\u628a\u6240\u6709\u5167\u5bb9\u90fd\u7528 puppeteer \u4f86\u6293\u53d6\u3002\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n## \u9700\u8981\u4f7f\u7528\u7684\u5957\u4ef6\\r\\n\\r\\n- fs\\r\\n- request\\r\\n- puppeteer [puppeteer \u8aaa\u660e\u6587\u4ef6](https://zhaoqize.github.io/puppeteer-api-zh_CN/#/)\\r\\n\\r\\n## \u529f\u80fd\u9700\u6c42\\r\\n\\r\\n1. \u4e0b\u8f09\u6700\u65b0\u8cbc\u6587\u7684 9 \u5247\u5716\u7247\\r\\n2. \u53d6\u5f97\u8fd1\u4e5d\u5247\u7684\u8cbc\u6587\u5167\u5bb9\u4e26\u8f49\u70ba JSON\uff0c\u4e26\u8207 9 \u5f35\u5716\u7247\u9023\u7d50\u6bd4\u5c0d\\r\\n\\r\\n### puppeteer \u4e0b\u8f09\u5716\u7247\\r\\n\\r\\n```js title=\\"ig.js\\"\\r\\n// url \u5716\u7247\u9023\u7d50 , filename \u5716\u7247\u540d\u7a31(\u8def\u5f91)\\r\\nconst request = require(\\"request\\");\\r\\n\\r\\nconst download = (url, filename) =>\\r\\n  new Promise((resolve, reject) =>\\r\\n    request.head(url, (err, res, body) => {\\r\\n      request(url).pipe(fs.createWriteStream(filename)).on(\\"close\\", resolve);\\r\\n    })\\r\\n  );\\r\\n```\\r\\n\\r\\n### \u7bc4\u4f8b\u53d6\u5f97\u5c0f\u738b\u5b50\u5c08\u696d\u6587\u7ae0\u5716\u7247\\r\\n\\r\\n1. \u524d\u5f80 IG \u5e33\u865f\u9801\u9762\\r\\n\\r\\n```js\\r\\nconst browser = await puppeteer.launch();\\r\\nconst page = await browser.newPage();\\r\\n// \u96fb\u8166\u7248\u53ca\u884c\u52d5\u88dd\u7f6e\u7684 html \u67b6\u69cb\u53ef\u80fd\u4e0d\u540c\uff0c\u9019\u908a\u4ee5\u96fb\u8166\u7248\u70ba\u4f8b\\r\\nawait page.setViewport({\\r\\n  width: 1920,\\r\\n  height: 1020,\\r\\n  isMobile: false,\\r\\n});\\r\\nawait page.setUserAgent(\\r\\n  \\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36 Edg/97.0.1072.55\\"\\r\\n);\\r\\n\\r\\n// \u767b\u5165\u529f\u80fd Start\\r\\n// \u6709\u6642\u6703\u56e0\u5e33\u865f\u8a2d\u5b9a\u9700\u8981\u767b\u5165\u624d\u80fd\u5230\u5e33\u865f\u9801\u9762\uff0c\u82e5\u9700\u8981\u5247\u81ea\u884c\u57f7\u884c\u4e0b\u65b9\u767b\u5165\u529f\u80fd\u3002\\r\\nawait page.goto(\\"https://www.instagram.com/accounts/login/\\");\\r\\nawait page.waitForSelector(\'input[name=\\"username\\"]\');\\r\\nawait page.click(\'input[name=\\"username\\"]\');\\r\\nawait page.keyboard.type(\\"IG\u5e33\u865f\\");\\r\\nawait page.click(\'input[name=\\"password\\"]\');\\r\\nawait page.keyboard.type(\\"IG\u5bc6\u78bc\\");\\r\\nawait page.click(\'button[type=\\"submit\\"]\');\\r\\nawait page.waitForNavigation();\\r\\n// \u767b\u5165\u529f\u80fd End\\r\\n\\r\\nawait page.goto(\\"https://www.instagram.com/lepetitprinceofficiel/\\");\\r\\nawait page.waitForSelector(\\"article\\"); // \u7b49\u5f85 article selector \u7522\u751f\\r\\n```\\r\\n\\r\\n2. \u4f7f\u7528 javascript console.log \u4f86\u53d6\u5f97\u76f8\u95dc\u8cc7\u6599\\r\\n\\r\\n```js\\r\\n// \u9801\u9762\u4e2d console.log \u7684\u8cc7\u6599\u6703\u5b58\u5165 result\\r\\nlet result = \\"\\";\\r\\npage.on(\\"console\\", (msg) => {\\r\\n  result += msg.text();\\r\\n});\\r\\n\\r\\n// \u65bc\u9801\u9762\u57f7\u884c js\\r\\nawait page.evaluate(async () => {\\r\\n  // \u53ef\u53c3\u95b1 ig \u9801\u9762 html \u7d50\u69cb\uff0c\u82e5\u672a\u4f86\u8abf\u6574\u5247\u8abf\u6574 selector\\r\\n  let arr = Array.from(document.querySelectorAll(\\"article a\\"));\\r\\n  let output = [];\\r\\n  arr.forEach((item, index) => {\\r\\n    if (index < 9)\\r\\n      // \u53ea\u53d6 9 \u5247\\r\\n      output.push({\\r\\n        index: index + 1,\\r\\n        img: item.querySelector(\\"img\\").src, //\u5716\u7247\u9023\u7d50\\r\\n        content: item.querySelector(\\"img\\").alt, //\u5716\u7247\u8cbc\u6587\u5167\u5bb9\uff0cIG \u6703\u653e\u5728\u5716\u7247 alt\\r\\n        link: item.href, //\u8cbc\u6587\u9023\u7d50\\r\\n      });\\r\\n  });\\r\\n  console.log(JSON.stringify(output)); // \u5c07 output \u8f49\u6210\u5b57\u4e32\u5b58\u5165 result\\r\\n});\\r\\n```\\r\\n\\r\\n3. \u5716\u7247\u4e0b\u8f09 & JSON \u6a94\u8f49\u51fa\\r\\n\\r\\n```js\\r\\n// console.log \u5c08\u51fa\u8cc7\u6599\u5728\u8f49\u56de JSON\\r\\nlet imgArr = JSON.parse(result);\\r\\n\\r\\n// \u8ff4\u5708\u4e0b\u8f09\u5716\u7247\\r\\nimgArr.forEach((item, index) => {\\r\\n  download(item.img, `${index + 1}.jpg`);\\r\\n});\\r\\n\\r\\n// \u6700\u5f8c\u5c07\u8cc7\u6599\u532f\u51fa\u76ee\u9304\u4e0b ig.json\\r\\nfs.writeFileSync(\\"ig.json\\", JSON.stringify(result), (err) => {\\r\\n  if (err) {\\r\\n    console.error(err);\\r\\n    return;\\r\\n  }\\r\\n});\\r\\n```\\r\\n\\r\\n## \u57f7\u884c\\r\\n\\r\\n```shell\\r\\nnode ig\\r\\n```\\r\\n\\r\\n![ig photos](../static/img/blog/ig1.JPG)\\r\\n\\r\\n```json title=\\"ig.json\\"\\r\\n[\\r\\n    {\\r\\n        \\"index\\": 1,\\r\\n        \\"img\\": \\"https://scontent-tpe1-1.cdninstagram.com/v/t51.2885-15/305770191_1180359235843202_9200902908392304113_n.jpg?stp=dst-jpg_e15_s640x640&_nc_ht=scontent-tpe1-1.cdninstagram.com&_nc_cat=102&_nc_ohc=XjdrgkcskYAAX8s89pb&edm=AOQ1c0wBAAAA&ccb=7-5&oh=00_AT9wJTvKFtS36PCdWVsDVgI9H0rX62H0-nqloD9e3oaoNA&oe=63239665&_nc_sid=8fd12b\\",\\r\\n        \\"content\\": \\"Photo by Le Petit Prince Officiel on September 09, 2022. May be art of rose.\\",\\r\\n        \\"link\\": \\"https://www.instagram.com/p/CiSrngdo0O4/\\"\\r\\n    },\\r\\n    {\\r\\n        \\"index\\": 2,\\r\\n        \\"img\\": \\"https://scontent-tpe1-1.cdninstagram.com/v/t51.2885-15/305532964_126667149941388_6555566626039334487_n.jpg?stp=c90.0.540.540a_dst-jpg_e15&_nc_ht=scontent-tpe1-1.cdninstagram.com&_nc_cat=100&_nc_ohc=PQ4JKjtwvkcAX-w1H3e&tn=1xkUadISo0MdELDT&edm=AOQ1c0wBAAAA&ccb=7-5&oh=00_AT-6PFtOat66UVmEKF1-9DJbgXaEldqrUTxQaSvRJU8JEw&oe=63224886&_nc_sid=8fd12b\\",\\r\\n        \\"content\\": \\"Photo by Le Petit Prince Officiel on September 07, 2022. May be an image of 1 person and tattoo.\\",\\r\\n        \\"link\\": \\"https://www.instagram.com/p/CiNiJ6AoHrV/\\"\\r\\n    },\\r\\n    // ...\\r\\n]\\r\\n```\\r\\n\\r\\n\u7684\u78ba\u6709\u9806\u5229\u6293\u4e0b\u5716\u7247\u6a94\u53ca `ig.json`\\r\\n\\r\\n## \u5b8c\u6574\u7a0b\u5f0f\u78bc\\r\\n\\r\\n```js title=\\"ig.js\\"\\r\\nconst request = require(\\"request\\");\\r\\nconst puppeteer = require(\\"puppeteer\\");\\r\\nconst fs = require(\\"fs\\");\\r\\n\\r\\nconst download = (url, filename) =>\\r\\n  new Promise((resolve, reject) =>\\r\\n    request.head(url, (err, res, body) => {\\r\\n      request(url).pipe(fs.createWriteStream(filename)).on(\\"close\\", resolve);\\r\\n    })\\r\\n  );\\r\\n\\r\\nconst getData = async () => {\\r\\n  const browser = await puppeteer.launch();\\r\\n  const page = await browser.newPage();\\r\\n  await page.setViewport({\\r\\n    width: 1920,\\r\\n    height: 1020,\\r\\n    isMobile: false,\\r\\n  });\\r\\n  await page.setUserAgent(\\r\\n    \\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36 Edg/97.0.1072.55\\"\\r\\n  );\\r\\n\\r\\n  // \u767b\u5165\u529f\u80fd Start\\r\\n  // \u6709\u6642\u6703\u56e0\u5e33\u865f\u8a2d\u5b9a\u9700\u8981\u767b\u5165\u624d\u80fd\u5230\u5e33\u865f\u9801\u9762\uff0c\u82e5\u9700\u8981\u5247\u81ea\u884c\u57f7\u884c\u4e0b\u65b9\u767b\u5165\u529f\u80fd\u3002\\r\\n  //await page.goto(\\"https://www.instagram.com/accounts/login/\\");\\r\\n  //await page.waitForSelector(\'input[name=\\"username\\"]\');\\r\\n  //await page.click(\'input[name=\\"username\\"]\');\\r\\n  //await page.keyboard.type(\\"IG\u5e33\u865f\\");\\r\\n  //await page.click(\'input[name=\\"password\\"]\');\\r\\n  //await page.keyboard.type(\\"IG\u5bc6\u78bc\\");\\r\\n  //await page.click(\'button[type=\\"submit\\"]\');\\r\\n  //await page.waitForNavigation();\\r\\n  // \u767b\u5165\u529f\u80fd End\\r\\n\\r\\n  await page.goto(\\"https://www.instagram.com/lepetitprinceofficiel/\\");\\r\\n  await page.waitForSelector(\\"article\\");\\r\\n\\r\\n  let result = \\"\\";\\r\\n  page.on(\\"console\\", (msg) => {\\r\\n    result += msg.text();\\r\\n  });\\r\\n\\r\\n  await page.evaluate(async () => {\\r\\n    let arr = Array.from(document.querySelectorAll(\\"article a\\"));\\r\\n    let output = [];\\r\\n    arr.forEach((item, index) => {\\r\\n      if (index < 9)\\r\\n        output.push({\\r\\n          index: index + 1,\\r\\n          img: item.querySelector(\\"img\\").src,\\r\\n          content: item.querySelector(\\"img\\").alt,\\r\\n          link: item.href,\\r\\n        });\\r\\n    });\\r\\n    console.log(JSON.stringify(output));\\r\\n  });\\r\\n\\r\\n  let imgArr = JSON.parse(result);\\r\\n  imgArr.forEach((item, index) => {\\r\\n    download(item.img, `${index + 1}.jpg`);\\r\\n  });\\r\\n\\r\\n  fs.writeFileSync(\\"ig.json\\", JSON.stringify(result), (err) => {\\r\\n    if (err) {\\r\\n      console.error(err);\\r\\n      return;\\r\\n    }\\r\\n  });\\r\\n\\r\\n  await browser.close();\\r\\n};\\r\\n\\r\\ngetData();\\r\\n```"},{"id":"LineNotify_GoogleAppScript","metadata":{"permalink":"/Web/blog/LineNotify_GoogleAppScript","source":"@site/blog/20220821_WebCheck.md","title":"\u5229\u7528 Google Apps Script \u76e3\u63a7\u7db2\u7ad9\uff0c\u4e26\u4f7f\u7528 Line Notify \u901a\u77e5","description":"\u524d\u8a00","date":"2022-08-21T17:28:00.000Z","formattedDate":"August 21, 2022","tags":[{"label":"Line Notify","permalink":"/Web/blog/tags/line-notify"},{"label":"Google App Script","permalink":"/Web/blog/tags/google-app-script"}],"readingTime":4.985,"hasTruncateMarker":true,"authors":[{"name":"WeiJie","imageURL":"./photo.jpg","key":"wj"}],"frontMatter":{"slug":"LineNotify_GoogleAppScript","title":"\u5229\u7528 Google Apps Script \u76e3\u63a7\u7db2\u7ad9\uff0c\u4e26\u4f7f\u7528 Line Notify \u901a\u77e5","authors":"wj","date":"2022-08-21T17:28","tags":["Line Notify","Google App Script"]},"prevItem":{"title":"\u4f7f\u7528 puppeteer \u53d6\u5f97 ig \u5716\u7247 & \u5167\u5bb9","permalink":"/Web/blog/Puppeteer_GetInstagram"},"nextItem":{"title":"\u89e3\u6c7a ReactRouter \u56de\u4e0a\u9801\u5f8c\u56de\u5230\u539f\u672c\u6efe\u52d5\u7684\u4f4d\u7f6e","permalink":"/Web/blog/ReactRouter_Scroll"}},"content":"## \u524d\u8a00\\r\\n\\r\\n\u524d\u5e7e\u5929\u516c\u53f8\u767c\u751f\u5916\u90e8 DNS \u670d\u52d9\u7570\u5e38\u5c0e\u81f4\u5b98\u7db2\u3001APP \u9019\u4e9b\u5c0d\u5916\u670d\u52d9\u901a\u901a\u90fd\u51fa\u73fe\u554f\u984c\uff0c\u9019\u624d\u60f3\u5230\u76ee\u524d\u5c0d\u65bc\u9019\u4e9b\u7cfb\u7d71\u7684\u76e3\u63a7\u90fd\u662f\u4f86\u81ea\u5167\u90e8\u7db2\u8def  \\r\\n\u800c\u50cf DNS \u9019\u7a2e\u5916\u90e8\u7db2\u8def\u624d\u80fd\u767c\u73fe\u7684\u4e8b\u60c5\u5012\u662f\u6f0f\u6389\u4e86\uff0c\u65bc\u662f\u60f3\u4e86\u60f3\uff0c\u9084\u662f\u514d\u8cbb\u7684 `Google Scripts` \u6700\u597d\u7528\u3002\\r\\n\\r\\n## \u5efa\u7acb\u65b0\u5c08\u6848\\r\\n\\r\\n[Apps Script \u7db2\u7ad9\u5165\u53e3](https://script.google.com/home/start)\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n![\u65b0\u589e\u5c08\u6848](../static/img/blog/GAS1.jpg)\\r\\n![\u65b0\u589e\u5c08\u6848](../static/img/blog/GAS2.jpg)\\r\\n\\r\\n\u5728\u53f3\u4e0a\u65b9\u6309\u4e0b`\u65b0\u5c08\u6848`\uff0c\u756b\u9762\u4e2d\u6703\u9810\u8a2d\u4e00\u500b function `myFunction()`\uff0c\u9019\u5c31\u662f\u8981\u57f7\u884c\u7a0b\u5f0f\u7684\u5730\u65b9\\r\\n\\r\\nGoogle Apps Script \u7684\u5beb\u6cd5\u8207 javascript \u5dee\u4e0d\u591a\uff0c\u53ea\u662f\u53c8\u591a\u4e86\u4e00\u4e9b Google \u5e6b\u4f60\u5beb\u597d\u7684\u51fd\u5f0f\u53ef\u4ee5\u4f7f\u7528  \\r\\n\u6240\u4ee5\u9019\u908a\u6211\u5011\u5c31\u7528 `Fetch` \u4f86 GET \u7db2\u7ad9\u770b\u770b\u662f\u4e0d\u662f\u80fd\u6b63\u78ba\u56de\u50b3 200 \u7684 Response Code\\r\\n\\r\\n```js title=\\"Google Apps Script\\"\\r\\n// \u82e5\u6709\u591a\u7db2\u7ad9\u5247\u65b0\u589e\u81f3 webs \u7269\u4ef6\u5373\u53ef\\r\\nconst webs = [{ Name: \\"example\\", URL: \\"http://example.com/\\" }];\\r\\n\\r\\nlet errorWebs = [];\\r\\n\\r\\nfunction webCheck() {\\r\\n  webs.forEach((item) => {\\r\\n    try {\\r\\n      let response = UrlFetchApp.fetch(item.url);\\r\\n      if (response.getResponseCode() != 200) errorWebs.push(item.Name); // \u82e5\u662f Response Code \u4e0d\u662f 200 \u5c31\u52a0\u5165\u932f\u8aa4\u9663\u5217\\r\\n    } catch (err) {\\r\\n      // \u9019\u908a\u6703\u4f7f\u7528 try catch \u9632\u6b62 fetch \u51fa\u73fe\u7570\u5e38\u932f\u8aa4\\r\\n      errorWebs.push(item.Name); // \u932f\u8aa4\u4e5f\u52a0\u5165\u63d0\u9192\u8b93\u6211\u5011\u6aa2\u67e5\\r\\n    }\\r\\n  });\\r\\n\\r\\n  if (errorWebs.length > 0) {\\r\\n    let errString = \\"\u76ee\u524d\u7570\u5e38\uff1a\\" + errorWebs.join(\\",\\");\\r\\n    // \u76ee\u524d\u7570\u5e38\uff1a example\\r\\n    // \u9019\u908a\u5728\u505a\u901a\u77e5\u8655\u7406\uff0c\u628a\u4e0a\u8ff0\u9019\u6bb5\u932f\u8aa4\u8a0a\u606f\u5bc4\u51fa\\r\\n  }\\r\\n}\\r\\n```\\r\\n\\r\\n## \u932f\u8aa4\u901a\u77e5\\r\\n\\r\\n\u932f\u8aa4\u8655\u7406\u4f7f\u7528 `Line Notify` \u4f86\u767c\u9001\u901a\u77e5\uff0c\u9996\u5148\u5148\u5230 [Line Notify \u5f8c\u53f0](https://notify-bot.line.me/zh_TW/)\u4f86\u5efa\u7acb\u6191\u8b49  \\r\\n\u767b\u5165\u5f8c\u5f9e\u53f3\u4e0a\u89d2\u7684\u540d\u7a31\u529f\u80fd\u5217\u9032\u53bb [\u500b\u4eba\u9801\u9762](https://notify-bot.line.me/my/)\uff0c\u518d\u9ede\u64ca\u4e0b\u65b9\u6709\u4e00\u500b\u767c\u884c\u6b0a\u6756\u7684\u6309\u9215\\r\\n\\r\\n![\u767c\u884c\u6b0a\u6756](../static/img/blog/GAS3.JPG)\\r\\n\\r\\n\u9019\u908a\u9700\u8981\u8f38\u5165\u9078\u64c7\u5169\u500b\u6b04\u4f4d\\r\\n\\r\\n- \u6b0a\u6756\u540d\u7a31\uff1a\u4ed6\u5728 Line Notify \u63a8\u64ad\u7d66\u4f60\u7684\u6642\u5019\u6703\u986f\u793a\uff0c\u8b93\u4f60\u80fd\u5206\u8fa8\u662f\u4ec0\u9ebc\u670d\u52d9\u4f7f\u7528\\r\\n- \u63a5\u6536\u901a\u77e5\u7684\u804a\u5929\u5ba4\uff1a\u82e5\u4f60\u662f\u8981\u81ea\u5df1\u6536\u5230\u5c31\u9078\u64c7\u6700\u4e0a\u65b9\u7684 \u300c\u900f\u904e 1 \u5c0d 1 \u804a\u5929\u63a5\u6536 Line Notify \u7684\u901a\u77e5\u300d\\r\\n  :::tip\\r\\n  \u4e5f\u53ef\u4ee5\u5728\u5176\u4ed6\u4eba\u7684\u804a\u5929\u5ba4\u6216\u7fa4\u7d44\u4e2d\u63a5\u6536\uff0c\u4f46\u5c31\u662f\u8981\u5728\u7fa4\u7d44\u4e2d\u52a0\u5165 `Line Notify` \u9019\u500b\u5b98\u65b9\u5e33\u865f\\r\\n  :::\\r\\n\\r\\n![\u767c\u884c\u6b0a\u67562](../static/img/blog/GAS4.JPG)\\r\\n\\r\\n\u9001\u51fa\u5f8c\u5c31\u53ef\u4ee5\u53d6\u5f97 Token\uff0c\u9019\u500b Token \u662f\u4e0d\u6703\u904e\u671f\u7684\u53ef\u4ee5\u4e00\u76f4\u4f7f\u7528\\r\\n\\r\\n![\u767c\u884c\u6b0a\u67563](../static/img/blog/GAS5.JPG)\\r\\n\\r\\n\u9019\u6642\u5019\u518d\u56de\u5230 Google Apps Script \u9019\u908a\uff0c\u7528 Fetch Post \u8cc7\u6599\u7d66 Line Notify API \u9032\u884c\u901a\u77e5\\r\\nToken \u7684\u90e8\u5206\u662f\u4f7f\u7528 `Bearer Token`\uff0c\u8a73\u7d30\u6587\u4ef6\u53ef\u4ee5\u53c3\u7167 [Line \u5b98\u65b9\u6587\u4ef6](https://notify-bot.line.me/doc/en/)\\r\\n\\r\\n```js\\r\\nfunction lineNotfiy(message) {\\r\\n  UrlFetchApp.fetch(\\"https://notify-api.line.me/api/notify\\", {\\r\\n    headers: {\\r\\n      Authorization: \\"Bearer \\" + [lineToken],\\r\\n    },\\r\\n    method: \\"post\\",\\r\\n    payload: {\\r\\n      message: message,\\r\\n    },\\r\\n  });\\r\\n}\\r\\n```\\r\\n\\r\\nfunction \u5beb\u5b8c\u5f8c\u5c31\u662f\u628a\u932f\u8aa4\u8a0a\u606f\u7d66\u50b3\u9032\u4f86\u5c31\u53ef\u4ee5\u8a66\u8457\u767c\u9001\u4e86\uff0c\u57f7\u884c\u7684\u8a71\u5247\u6309\u7de8\u8f2f\u5668\u4e0a\u65b9\u6709\u4e00\u500b\u300c\u57f7\u884c\u300d\uff0c  \\r\\n\u53f3\u908a\u7684 Function \u8981\u8a18\u5f97\u6539\u6210 **WebCheck**\\r\\n\\r\\n```js\\r\\nif (errorWebs.length > 0) {\\r\\n  let errString = \\"\u76ee\u524d\u7570\u5e38\uff1a\\" + errorWebs.join(\\",\\");\\r\\n  lineNotfiy(message);\\r\\n}\\r\\n```\\r\\n\\r\\n\u4e0d\u904e\u57f7\u884c\u524d\uff0c\u56e0\u70ba\u9019\u500b\u7a0b\u5f0f\u662f\u6211\u5011\u81ea\u5df1\u5beb\u7684\uff0c\u4e26\u975e\u4f86\u81ea\u65bc Google \u672c\u8eab\uff0c\u6240\u4ee5\u6703\u63d0\u9192\u4e26\u6c92\u6709\u7d93\u904e\u5b98\u65b9\u8a8d\u8b49\u7684\u8b66\u544a  \\r\\n\u5728\u8df3\u51fa\u7684\u8996\u7a97\u9078\u64c7**\u300c\u9032\u968e\u300d** \u4ee5\u53ca **\u524d\u5f80\u300c\u4f60\u7684\u5c08\u6848\u300d(\u4e0d\u5b89\u5168)**\\r\\n\\r\\n![\u767c\u884c\u6b0a\u67564](../static/img/blog/GAS6.JPG)\\r\\n\\r\\n\u5141\u8a31\u5f8c\u5c31\u6703\u57f7\u884c\u7a0b\u5f0f\u4e86\uff0c\u800c\u5982\u679c\u6709\u932f\u8aa4\u5c31\u6703\u6536\u5230 Line Notify\\r\\n\\r\\n![\u767c\u884c\u6b0a\u67565](../static/img/blog/GAS7.JPG)\\r\\n\\r\\n\u78ba\u8a8d\u5b8c\u7a0b\u5f0f\u6c92\u554f\u984c\u5f8c\u5c31\u8981\u4f86\u8a2d\u5b9a\u6392\u7a0b\u8b93\u7a0b\u5f0f\u81ea\u52d5\u57f7\u884c\uff0c\u5728 Google \u7de8\u8f2f\u5668\u5de6\u908a\u6709\u4e00\u500b\u89f8\u767c\u689d\u4ef6\uff0c\u9ede\u4e0b\u5f8c\u518d\u9078\u64c7\u65b0\u589e\u89f8\u767c\u689d\u4ef6  \\r\\n\u689d\u4ef6\u7684\u90e8\u5206\u53ef\u4ee5\u8a2d\u5b9a\u4f7f\u7528 **\u6642\u9593\u9a45\u52d5** \u53ef\u4ee5\u9078\u64c7\u6bcf\u6708\u3001\u6bcf\u9031\u3001\u6bcf\u65e5\u3001\u6bcf\u5c0f\u6642\u6700\u77ed\u5230\u6bcf\u5206\u9418\u7684\u8a08\u6642\u5668\u53ef\u4ee5\u9078\u64c7\uff0c\u5b8c\u6210\u5f8c\u6309\u4e0b**\u5132\u5b58**\u5c31\u5927\u529f\u544a\u6210\u4e86\\r\\n\\r\\n![\u767c\u884c\u6b0a\u67566](../static/img/blog/GAS8.JPG)\\r\\n\\r\\n## Google Apps Script \u7a0b\u5f0f\u78bc\\r\\n\\r\\n```js\\r\\nconst LINE_TOKEN = [TOKEN];\\r\\nconst webs = [{ Name: \\"example\\", URL: \\"http://example.com/\\" }];\\r\\n\\r\\nlet errorWebs = [];\\r\\n\\r\\nfunction webCheck() {\\r\\n  webs.forEach((item) => {\\r\\n    try {\\r\\n      let response = UrlFetchApp.fetch(item.url);\\r\\n      if (response.getResponseCode() == 200) errorWebs.push(item.Name);\\r\\n    } catch (err) {\\r\\n      errorWebs.push(item.Name);\\r\\n    }\\r\\n  });\\r\\n\\r\\n  if (errorWebs.length > 0) {\\r\\n    let errString = \\"\u76ee\u524d\u7570\u5e38\uff1a\\" + errorWebs.join(\\",\\");\\r\\n    lineNotify(errString);\\r\\n  }\\r\\n}\\r\\n\\r\\nfunction lineNotify(message) {\\r\\n  UrlFetchApp.fetch(\\"https://notify-api.line.me/api/notify\\", {\\r\\n    headers: {\\r\\n      Authorization: \\"Bearer \\" + LINE_TOKEN,\\r\\n    },\\r\\n    method: \\"post\\",\\r\\n    payload: {\\r\\n      message: message,\\r\\n    },\\r\\n  });\\r\\n}\\r\\n```"},{"id":"ReactRouter_Scroll","metadata":{"permalink":"/Web/blog/ReactRouter_Scroll","source":"@site/blog/20220819_ReactRouter_Scroll.md","title":"\u89e3\u6c7a ReactRouter \u56de\u4e0a\u9801\u5f8c\u56de\u5230\u539f\u672c\u6efe\u52d5\u7684\u4f4d\u7f6e","description":"ReactRouter \u63db\u9801\u6642\u6703\u5931\u53bb\u539f\u672c\u9801\u9762\u7684\u6efe\u52d5\u4f4d\u7f6e\uff0c\u5c0e\u81f4\u8df3\u56de\u6642\u9700\u8981\u91cd\u65b0\u6efe\u52d5\uff0c\u6240\u4ee5\u624b\u52d5\u7d00\u9304\u6efe\u52d5\u4f4d\u7f6e\u4f9b\u63db\u9801\u4f7f\u7528","date":"2022-08-19T22:08:00.000Z","formattedDate":"August 19, 2022","tags":[{"label":"React","permalink":"/Web/blog/tags/react"},{"label":"ReactRouter","permalink":"/Web/blog/tags/react-router"},{"label":"ReactHook","permalink":"/Web/blog/tags/react-hook"}],"readingTime":3.11,"hasTruncateMarker":true,"authors":[{"name":"WeiJie","imageURL":"./photo.jpg","key":"wj"}],"frontMatter":{"slug":"ReactRouter_Scroll","title":"\u89e3\u6c7a ReactRouter \u56de\u4e0a\u9801\u5f8c\u56de\u5230\u539f\u672c\u6efe\u52d5\u7684\u4f4d\u7f6e","authors":"wj","description":"ReactRouter \u63db\u9801\u6642\u6703\u5931\u53bb\u539f\u672c\u9801\u9762\u7684\u6efe\u52d5\u4f4d\u7f6e\uff0c\u5c0e\u81f4\u8df3\u56de\u6642\u9700\u8981\u91cd\u65b0\u6efe\u52d5\uff0c\u6240\u4ee5\u624b\u52d5\u7d00\u9304\u6efe\u52d5\u4f4d\u7f6e\u4f9b\u63db\u9801\u4f7f\u7528","date":"2022-08-19T22:08","tags":["React","ReactRouter","ReactHook"]},"prevItem":{"title":"\u5229\u7528 Google Apps Script \u76e3\u63a7\u7db2\u7ad9\uff0c\u4e26\u4f7f\u7528 Line Notify \u901a\u77e5","permalink":"/Web/blog/LineNotify_GoogleAppScript"},"nextItem":{"title":"\u516d\u89d2\u5b78\u9662 React \u7dda\u4e0a\u8b80\u66f8\u6703\u5b78\u7fd2\u5fc3\u5f97","permalink":"/Web/blog/HexSchool_ReactStudy"}},"content":"## \u524d\u8a00\\r\\n\\r\\n\u9019\u5e7e\u5929\u4e00\u6a23\u662f\u5728\u505a `\u516d\u89d2React\u7dda\u4e0a\u8b80\u66f8\u6703` \u7684\u6bcf\u9031\u4f5c\u696d\u6642\uff0c\u5217\u8868\u7684\u90e8\u5206\u4e26\u6c92\u6709\u505a\u5206\u9801\u7684\u529f\u80fd  \\r\\n\u800c\u662f\u4f7f\u7528 `Lazy Loading` \u7684\u4f5c\u6cd5\u5f80\u4e0b\u5c55\uff0c\u800c\u6309\u4e0b\u666f\u9ede\u5c31\u6703\u8dd1\u5230\u666f\u9ede\u7684\u5167\u5bb9\u9801  \\r\\n\u4f46\u518d\u56de\u5230\u5217\u8868\u6642\u53c8\u8981\u91cd\u982d\u6efe\u904e\uff0c\u9019\u6a23\u5c0d\u4f7f\u7528\u8005\u4f86\u8aaa\u6703\u5f88\u4e0d\u65b9\u4fbf\\r\\n\\r\\n## \u4fee\u6539\u524d\\r\\n\\r\\n![\u4fee\u6539\u524d](../static/img/blog/ReactRouter_Scroll_Before.gif)\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n## \u4f5c\u6cd5\\r\\n\\r\\n\u5728 `JS` \u4e2d\u53d6\u5f97\u53ca\u63a7\u5236\u6efe\u52d5\u4f4d\u7f6e\u662f\u4f7f\u7528\\r\\n\\r\\n```js\\r\\n// \u53d6\u5f97\u76ee\u524d\u7db2\u9801\u5df2\u6efe\u52d5\u503c\\r\\nwindow.scrollY\\r\\n// \u5c07\u7db2\u9801\u6efe\u52d5\u81f3\u67d0\u500b\u5730\u65b9\\r\\nwindow.scrollTo({ top: /* \u6efe\u52d5\u7684\u503c */ });\\r\\n```\\r\\n\\r\\n\u6240\u4ee5\u5728\u9019\u500b\u5c08\u6848\u4e2d\uff0c\u9700\u8981\u53bb`\u76e3\u807d\u6efe\u52d5\u7684\u503c\u4e26\u5b58\u8d77\u4f86`\uff0c\u7b49\u5230\u56de\u5230\u5217\u8868\u9801\u6642\u518d\u8b80\u51fa\u4f86  \\r\\n\u5b58\u8d77\u4f86\u7684\u65b9\u6cd5\u6709\u5f88\u591a\u7a2e\uff0c\u82e5\u6c92\u6709\u8f09\u5165\u76f8\u95dc\u7ba1\u7406\u7684 plugin \u7684\u8a71  \\r\\n\u5c31\u53ef\u4ee5\u4f7f\u7528 `localstorage` \u4f86\u5b58\uff0c\u6216\u662f\u900f\u904e `Router \u7684 State` \u50b3\u905e\u76f8\u95dc\u53c3\u6578\\r\\n\u9019\u6b21\u5247\u7528\u5f8c\u8005\u4f86\u9054\u6210\\r\\n\\r\\n```js title=\\"\u5b58\u8d77\u4f86\u7684\u90e8\u5206\\"\\r\\nconst [scrollV, setScrollV] = useState(0);\\r\\n\\r\\nuseEffect(() => {\\r\\n  document.addEventListener(\\"scroll\\", (e) => {\\r\\n    setScrollV(window.scrollY);\\r\\n  });\\r\\n}, []);\\r\\n```\\r\\n\\r\\n```jsx title=\\"\u50b3\u905e\u53c3\u6578\u7684\u90e8\u5206\\"\\r\\n// \u900f\u904e Router \u5207\u63db\u5230\u5167\u9801\u5f8c\uff0c\u6703\u5e36\u5165 state \u88e1\u9762\u4e00\u500b scroll \u7269\u4ef6\\r\\n<Link to={`/info/${Id}`} state={{ scroll }}></Link>;\\r\\n\\r\\n// \u5167\u9801\u53d6\u5f97 state \u9700\u8981\u4f7f\u7528\u5230 useLocation\\r\\nimport { useLocation } from \\"react-router-dom\\";\\r\\n\\r\\nexport default function Detail() {\\r\\n  const location = useLocation();\\r\\n  // \u53d6\u5f97 scroll \u7684\u6578\u503c\uff0c\u82e5\u6c92\u6709\u5247\u70ba 0\\r\\n  const scroll = location.state.scroll || 0;\\r\\n}\\r\\n```\\r\\n\\r\\n\u5176\u5be6\u9019\u500b\u554f\u984c\u61c9\u8a72\u4f7f\u7528 `localstorage` \u6bd4\u8f03\u65b9\u4fbf\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u5217\u8868\u9801\u5b58\u8ddf\u8b80  \\r\\n\u82e5\u900f\u904e `state` \u5247\u8981\u5148\u50b3\u5230\u5167\u9801\uff0c\u518d\u50b3\u56de\u4f86\u5217\u8868\u5169\u9053\u624b\u7e8c  \\r\\n\u5167\u9801\u7684\u90e8\u5206\u4e00\u6a23\u628a\u539f\u672c\u7684 `scroll` \u518d\u900f\u904e state \u50b3\u56de\u5217\u8868\u9801\\r\\n\\r\\n```jsx title=\\"\u5217\u8868\u9801\\"\\r\\nimport { useState, useEffect } from \\"react\\";\\r\\nimport { useLocation } from \\"react-router-dom\\";\\r\\n\\r\\nexport default function List() {\\r\\n  const location = useLocation();\\r\\n  let scroll = location.state ? location.state.scroll : 0;\\r\\n  const [scrollV, setScrollV] = useState(0);\\r\\n\\r\\n  useEffect(() => {\\r\\n    // \u53d6\u5f97\u666f\u9ede\u8cc7\u6599\u6e32\u67d3\u6210\u5217\u8868\\r\\n    renderData();\\r\\n    // \u76e3\u807d\u6efe\u52d5\u503c\\r\\n    document.addEventListener(\\"scroll\\", (e) => {\\r\\n      setScrollV(window.scrollY);\\r\\n    });\\r\\n    // \u6efe\u52d5\u5230\u5132\u5b58\u7684\u503c\\r\\n    window.scrollTo({ top: scroll });\\r\\n  }, []);\\r\\n}\\r\\n```\\r\\n\\r\\n\u539f\u672c\u4ee5\u70ba\u9019\u6a23\u5c31\u5b8c\u6210\u4e86\uff0c\u7d50\u679c\u56de\u4f86\u9084\u662f\u6c92\u6548\u679c...  \\r\\n\u4f46\u53bb `console.log(scroll)` \u6216\u662f\u624b\u52d5\u57f7\u884c `window.scrollTo({ top: scroll })` \u90fd\u6c92\u554f\u984c  \\r\\n\u5f8c\u4f86\u624d\u60f3\u5230\u53ef\u80fd\u57f7\u884c\u7684\u6642\u9593\u662f\u666f\u9ede\u9084\u6c92\u6e32\u67d3\u5b8c\u6210\u524d\uff0c\u6240\u4ee5\u6efe\u5230\u5132\u5b58\u7684\u503c\u662f\u6c92\u6709\u53cd\u61c9\u7684 `\u5132\u5b58\u7684\u503c\u5927\u65bc\u76ee\u524d\u9801\u9762\u7684\u9ad8\u5ea6`  \\r\\n\u6240\u4ee5\u53ea\u8981\u8b93\u4ed6\u6162\u4e00\u9ede\u57f7\u884c\u5c31\u53ef\u4ee5\u4e86\\r\\n\\r\\n```js\\r\\nsetTimeout(() => {\\r\\n  window.scrollTo({ top: scroll });\\r\\n}, 100);\\r\\n```\\r\\n\\r\\n## \u4fee\u6539\u5f8c\\r\\n\\r\\n![\u4fee\u6539\u5f8c](../static/img/blog/ReactRouter_Scroll_After.gif)\\r\\n\\r\\n## Demo\\r\\n\\r\\n[\u9ad8\u96c4\u65c5\u904a\u7db2](https://weij0.github.io/React-Kaohsiung-Travel/#/)"},{"id":"HexSchool_ReactStudy","metadata":{"permalink":"/Web/blog/HexSchool_ReactStudy","source":"@site/blog/20220814_HexSchool_ReactStudy.md","title":"\u516d\u89d2\u5b78\u9662 React \u7dda\u4e0a\u8b80\u66f8\u6703\u5b78\u7fd2\u5fc3\u5f97","description":"\u524d\u8a00","date":"2022-08-14T10:00:00.000Z","formattedDate":"August 14, 2022","tags":[{"label":"React","permalink":"/Web/blog/tags/react"},{"label":"HexSchool","permalink":"/Web/blog/tags/hex-school"}],"readingTime":6.775,"hasTruncateMarker":true,"authors":[{"name":"WeiJie","imageURL":"./photo.jpg","key":"wj"}],"frontMatter":{"slug":"HexSchool_ReactStudy","title":"\u516d\u89d2\u5b78\u9662 React \u7dda\u4e0a\u8b80\u66f8\u6703\u5b78\u7fd2\u5fc3\u5f97","authors":"wj","date":"2022-08-14T10:00","tags":["React","HexSchool"]},"prevItem":{"title":"\u89e3\u6c7a ReactRouter \u56de\u4e0a\u9801\u5f8c\u56de\u5230\u539f\u672c\u6efe\u52d5\u7684\u4f4d\u7f6e","permalink":"/Web/blog/ReactRouter_Scroll"},"nextItem":{"title":"React Hook-Form \u9001\u51fa\u4e8b\u4ef6 VS \u591a useState","permalink":"/Web/blog/ReactHook_Form"}},"content":"## \u524d\u8a00\\r\\n\\r\\n\u53bb\u5e74\u66fe\u7d93\u5165\u9580 React \u7684 `Class Components`\uff0c\u82b1\u4e86\u5f88\u591a\u6642\u9593\u751a\u81f3\u7ffb\u51fa JS \u7684 Class \u91cd\u982d\u4f86\u770b  \\r\\n\u7d50\u679c\u4f3c\u4e4e\u53ea\u6709\u4f3c\u61c2\u975e\u61c2\uff0c\u800c\u9019\u6b21\u6ed1\u5230\u516d\u89d2\u4e5f\u958b\u8fa6 React \u8b80\u66f8\u6703\u800c\u662f\u7528 `hooks` \u7684\u65b9\u5f0f  \\r\\n\u6240\u4ee5\u5c31\u6fc0\u8d77\u4e86\u5b78\u7fd2\u617e\u671b\uff0c\u624b\u5200\u4e0b\u55ae\u958b\u5b78\\r\\n\\r\\n## \u5b78\u7fd2\u904e\u7a0b\\r\\n\\r\\n\u9019\u6b21\u5167\u5bb9\u6211\u89ba\u5f97\u62c6\u5f97\u76f8\u7576\u7684\u7406\u60f3\uff0c\u5f9e\u6700\u57fa\u790e\u7684 `useState` `useEffect` \u958b\u59cb  \\r\\n\u4ee5\u6bcf\u5929\u4e00\u4efd\u4f5c\u696d\u7684\u65b9\u5f0f\u8b93\u5927\u5bb6\u624b\u52d5\u53bb\u586b\u5165\u7a0b\u5f0f\u78bc\uff0c\u9084\u53ef\u4ee5\u770b\u5230\u5176\u4ed6\u4eba\u5beb\u7684\u7a0b\u5f0f\u78bc  \\r\\n\u9019\u5c0d\u7a0b\u5f0f\u5b78\u7fd2\u4f86\u8aaa\u771f\u7684\u662f\u4e00\u5927\u5e6b\u52a9\uff0c\u56e0\u70ba Coding \u901a\u5e38\u90fd\u662f\u7531\u81ea\u5df1\u5927\u8166\u51fa\u767c  \\r\\n\u6240\u4ee5\u6709 bug \u6216\u662f\u696d\u52d9\u908f\u8f2f\u6709\u554f\u984c\u6642\u5e38\u5e38\u81ea\u5df1\u770b\u4e0d\u51fa\u4f86\uff0c\u4f46\u901a\u904e\u770b\u5927\u91cf\u4e0d\u540c\u7a0b\u5f0f\u4f46\u76f8\u540c\u529f\u80fd\u7684 code  \\r\\n\u53ef\u4ee5\u8b93\u81ea\u5df1\u5c0d\u65bc\u908f\u8f2f\u65b9\u9762\u66f4\u52a0\u5347\u7d1a \ud83d\udcc8\\r\\n\\r\\n> \u539f\u4f86\u53ef\u4ee5\u9019\u6a23\u5beb...\uff0c\u6211\u539f\u4f86\u90fd\u53ea\u6703\u9019\u6a23\u5beb\uff0c\u9019\u6a23\u5beb\u6709\u751a\u9ebc\u597d\u8655...\\r\\n\\r\\n## \u6700\u7d42\u6311\u6230\u4f5c\u696d - Online TodoList \\r\\n\\r\\n\u6c92\u932f\uff0c\u53c8\u662f TodoList\uff0c\u5df2\u7d93\u8b8a\u6210\u9032\u968e\u7684 `Hello World` \u4e86  \\r\\n\u9019\u6b21\u5f88\u4f5b\u5fc3\uff0c\u96d6\u7136\u6709\u63d0\u4f9b\u8a2d\u8a08\u7a3f\uff0c\u4f46\u4e5f\u63d0\u4f9b\u4e86\u5b78\u9577\u59d0\u5df2\u7d93\u5207\u904e\u7684\u6a94\u6848\uff0c\u8b93\u5927\u5bb6\u53ea\u5c08\u6ce8\u5728 `React` \u7684\u7a0b\u5f0f\u4e0a  \\r\\n\u5207\u7248\u4e0a\u57fa\u672c\u4e0a\u6c92\u6709\u592a\u5927\u7684\u554f\u984c\uff0c\u6709\u7279\u6b8a\u8655\u7406\u7684\u90e8\u5206\u53ea\u6709 `Checkbox` \u7684 checked \u72c0\u614b\u4e26\u4e0d\u662f\u7cfb\u7d71\u9810\u8a2d\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n### \u5207\u7248\\r\\n\\r\\n<details><summary>\u5207\u7248 - \u7279\u6b8a\u7684 checkbox</summary>\\r\\n<p>\\r\\n\\r\\n![\u7279\u6b8a\u7684checked](../static/img/blog/ReactStudy1.jpg)\\r\\n\\r\\n\u6211\u7684\u89e3\u6cd5\u662f\u7528\u5c07\u539f\u672c\u7684 `checkbox` \u96b1\u85cf\uff0c\u518d\u66ff\u63db\u6210\u5f9e\u8a2d\u8a08\u7a3f\u53d6\u51fa\u7684 svg \u6216 png \u6a94  \\r\\n\u82e5\u662f\u52fe\u9078\u7684\u8a71\u5c31\u53ef\u4ee5\u7528 CSS \u7684 `:checked` \u4f86\u9078\u64c7\u5230\u66ff\u63db\u6210\u6253\u52fe\u52fe\u5716\uff0c\u53e6\u5916\u4e00\u5f35\u5c31\u662f\u6846\u6846\u5716\u4e86  \\r\\n`label` \u6a19\u7c64\u5305\u4f4f `checkbox` \u53ca\u4e00\u500b `span` \uff0c\u5229\u7528 `label` \u7684 `for` \u529f\u80fd\u4e5f\u53ef\u4ee5\u53bb\u89f8\u767c `checkbox` \u7684\u5207\u63db\\r\\n\\r\\n```html\\r\\n<label for=\\"checkbox1\\">\\r\\n  <input type=\\"checkbox\\" id=\\"checkbox1\\" />\\r\\n  <span>\u539f\u672c label \u7684\u6587\u5b57</span>\\r\\n</label>\\r\\n```\\r\\n\\r\\n```css\\r\\nlabel {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  padding: 15px 0;\\r\\n  width: 95%;\\r\\n  line-height: 26px;\\r\\n  border-bottom: 1px solid #e5e5e5;\\r\\n  cursor: pointer;\\r\\n}\\r\\ninput[type=\\"checkbox\\"] {\\r\\n  display: none;\\r\\n}\\r\\ninput[type=\\"checkbox\\"] + span {\\r\\n  position: relative;\\r\\n  padding-left: 36px;\\r\\n  background: /* \u6846\u6846\u5716\u7247 */ no-repeat left center;\\r\\n}\\r\\ninput[type=\\"checkbox\\"]:checked + span {\\r\\n  background: /* \u52fe\u52fe\u5716\u7247 */ no-repeat left center;\\r\\n}\\r\\n```\\r\\n\\r\\n</p>\\r\\n</details>\\r\\n\\r\\n### API\\r\\n\\r\\n<details><summary>API \u53ca\u767b\u5165\u8cc7\u8a0a\u5be6\u4f5c</summary>\\r\\n\\r\\n\\r\\n\\r\\n\u9019\u6b21\u7684\u6709\u63d0\u4f9b API \u53ef\u4ee5\u505a\u5230\u8a3b\u518a\u53ca\u767b\u5165\uff0c\u5728 [\ud83d\udd17\u6587\u4ef6](https://todoo.5xcamp.us/api-docs/index.html) \u4e0a\u6709\u770b\u5230  \\r\\n\u65e2\u7136\u8981\u5be6\u4f5c\u767b\u5165\u53c8\u6709 Token \u5c31\u5fc5\u9808\u628a\u8cc7\u6599\u5b58\u8d77\u4f86\uff0c\u4f46\u9019\u6b21\u6c92\u6709\u4f7f\u7528\u5176\u4ed6\u76f8\u95dc\u7684\u5957\u4ef6\u7ba1\u7406  \\r\\n\u5c31\u6539\u6210\u4f7f\u7528 `localstorage` \u4f86\u5be6\u4f5c  \\r\\n\u5148\u958b\u4e00\u652f\u96a8\u4fbf\u547d\u540d\u7684 js \u5beb\u76f8\u95dc\u529f\u80fd\\r\\n\\r\\n```js title=\\"common.js\\"\\r\\n// \u5c07\u767b\u5165\u7684\u8cc7\u6599\u5b58\u9032\u53bb user\\r\\nexport const setUserData = (data) => localStorage.setItem(\\"user\\", JSON.stringify(data));\\r\\n// \u53d6\u5f97\u5b58\u5165\u7684 user\\r\\nexport const getUserData = () => JSON.parse(localStorage.getItem(\\"user\\"));\\r\\n// \u53d6\u5f97 user authorization\\r\\nexport const getAuthToken = () => getUserData().authorization;\\r\\n// \u780d\u6389 user \u8cc7\u6599\\r\\nexport const clearUserData = () => localStorage.clear();\\r\\n```\\r\\n\\r\\n---\\r\\n\\r\\n\u5b8c\u6210\u5f8c\u5c31\u8981\u4f86\u63a5 API \u5566\uff0c\u4e0d\u904e\u5982\u4f55\u7ba1\u7406\u9019\u4e9b API \u5011\u4e5f\u662f\u4e00\u9580\u5b78\u554f  \\r\\n\u5982\u679c\u6bcf\u500b function \u90fd\u53bb\u91cd\u65b0\u5beb\u4e00\u6b21 Request \u7684\u8a71\uff0c\u842c\u4e00 API URL \u6216\u662f\u9700\u8981\u50b3\u905e\u7684\u6b04\u4f4d\u540d\u7a31\u8b8a\u4e86  \\r\\n\u8c48\u4e0d\u662f\u8981\u7ffb\u958b\u5c08\u6848\u4e00\u652f\u4e00\u652f\u6293\u4f86\u6539\uff0c\u6240\u4ee5\u96c6\u4e2d\u7ba1\u7406\u6703\u65b9\u4fbf\u8a31\u591a  \\r\\n\u8d95\u5feb\u56de\u53bb\u627e\u627e Mike \u5927\u7684\u6587\u7ae0 [\ud83d\udd17\u4f7f\u7528 Axios \u4f60\u7684 API \u90fd\u600e\u9ebc\u7ba1\u7406\uff1f](https://medium.com/i-am-mike/%E4%BD%BF%E7%94%A8axios%E6%99%82%E4%BD%A0%E7%9A%84api%E9%83%BD%E6%80%8E%E9%BA%BC%E7%AE%A1%E7%90%86-557d88365619)\\r\\n\\r\\n:::tip\\r\\n\u6587\u7ae0\u662f\u4f7f\u7528 **Axios** \u800c\u6211\u662f\u7528 **fetch** \u9054\u6210\uff0c\u4f46\u5927\u540c\u5c0f\u7570\u5566  \\r\\n[\ud83d\udd17Fetch \u9019\u7bc7\u5beb\u7684\u8d85\u8a73\u7d30 - JavaScript Fetch API \u4f7f\u7528\u6559\u5b78 - OXXO.STUDIO](https://www.oxxostudio.tw/articles/201908/js-fetch.html)\\r\\n:::\\r\\n\\r\\n\u6548\u4eff\u8457\u6587\u7ae0\u958b\u4e86\u4e00\u652f API.js \u4f86\u7ba1\u7406\u6240\u6709\u7684 `Request`\\r\\n\\r\\n```js title=\\"API.js\\"\\r\\nimport { getAuthToken } from \\"./common\\";\\r\\n// API \u7684\u524d\u7db4\u7db2\u5740\\r\\nconst API_URL = \\"https://todoo.5xcamp.us\\";\\r\\n\\r\\n// \u5171\u7528\u7684 Fetch Option\\r\\nlet optionBase = {\\r\\n  headers: {\\r\\n    Accept: \\"application/json\\",\\r\\n    \\"Content-Type\\": \\"application/json\\",\\r\\n  },\\r\\n};\\r\\n\\r\\n// Users \u529f\u80fd\\r\\nconst userRequest = (method, path, data) => {\\r\\n  let optionObject = Object.assign({}, { ...optionBase, method });\\r\\n\\r\\n  // Fetch \u5728 GET \u7684\u60c5\u6cc1\u4e0b\u4e0d\u80fd\u5e36\u6709 body \u53c3\u6578\uff0c\u6240\u4ee5\u5148\u5224\u65b7\u662f\u4e0d\u662f POST \u5728\u52a0\u4e0a\u8a72\u53c3\u6578\\r\\n  if (method === \\"POST\\") optionObject.body = JSON.stringify(data);\\r\\n\\r\\n  return fetch(`${API_URL}/users/${path}`, optionObject);\\r\\n};\\r\\n\\r\\n// Todos \u529f\u80fd\\r\\nconst todoRequest = (method, path, data) => {\\r\\n  let optionObject = Object.assign({}, { ...optionBase, method });\\r\\n\\r\\n  // Todos \u529f\u80fd\u9700\u8981\u5e36\u5165 Authorization\\r\\n  optionObject.headers.Authorization = getAuthToken();\\r\\n  if (method === \\"POST\\") optionObject.body = JSON.stringify(data);\\r\\n\\r\\n  return fetch(`${API_URL}/todos/${path}`, optionObject);\\r\\n};\\r\\n\\r\\n// User\\r\\nexport const apiLogin = ({ email, password }) =>\\r\\n  // \u9810\u5148\u5b9a\u7fa9\u597d method & path \u9019\u6a23\u5c31\u53ea\u8981\u50b3\u53c3\u6578\u5c31\u597d\u4e86\\r\\n  userRequest(\\"POST\\", \\"sign_in\\", {\\r\\n    user: {\\r\\n      email,\\r\\n      password,\\r\\n    },\\r\\n  });\\r\\n```\\r\\n\\r\\n\u5be6\u969b\u4f7f\u7528\u4e0a\\r\\n\\r\\n```jsx title=\\"login.jsx\\"\\r\\nimport { apiLogin } from \\"../API\\";\\r\\n\\r\\napiLogin({ email, password })\\r\\n  .then((res) => res.json())\\r\\n  .then((resJson) => {\\r\\n    // \u8655\u7406\\r\\n  })\\r\\n  .catch((err) => {\\r\\n    // \u932f\u8aa4\u8655\u7406\\r\\n  });\\r\\n```\\r\\n\\r\\n\u662f\u4e0d\u662f\u7c21\u6f54\u8a31\u591a\u5462\uff0c\u800c\u82e5\u662f\u5927\u5c08\u6848\u6709\u8a31\u591a\u5730\u65b9\u6703\u7528\u5230\u5171\u540c\u7684 API  \\r\\n\u5f80\u5f8c\u5c31\u53ea\u8981\u4fee\u6539 `API.js` \u9019\u652f\u6a94\u6848\u5c31\u597d\uff0c\u771f\u9999 \ud83d\udc4d\ud83d\udc4d\\r\\n\\r\\n</details>\\r\\n\\r\\n### \u90e8\u5c6c Github Page\\r\\n\\r\\n<details><summary>Router \u914d\u7f6e</summary>\\r\\n\\r\\n\u539f\u672c\u60f3\u8aaa\u53c3\u7167\u8457[\ud83d\udd17\u6587\u4ef6](https://create-react-app.dev/docs/deployment/#github-pages) \u5c31\u53ef\u4ee5\u5b89\u7136\u7121\u6059\u7684\u90e8\u5c6c\u4e0a\u4f86  \\r\\n\u7d50\u679c\u4e00\u6253\u958b `Github Page` \u51fa\u73fe\u4e00\u7247\u7a7a\u767d\uff0c\u6709\u4e86 `Vue Cli` \u90e8\u5c6c\u7684\u7d93\u9a57\uff0c\u6211\u60f3\u4e00\u5b9a\u53c8\u662f\u8def\u7531\u51fa\u554f\u984c\u4e86  \\r\\n\u5f8c\u4f86\u53c3\u95b1\u4e86 [\ud83d\udd17stackoverflow - react-router-not-working-with-github-pages](https://stackoverflow.com/questions/71984401/react-router-not-working-with-github-pages)  \\r\\n\\r\\n\u6709\u4eba\u63d0\u4f9b\u4e86\u9019\u65b9\u9762\u7684\u8a0a\u606f\u6307\u51fa `Github Page` \u4e0d\u652f\u63f4 `react-router` \u9810\u8a2d\u7684 `BrowserRouter`  \\r\\n\u9700\u8981\u6539\u4f7f\u7528 `HashRouter` \u4f86\u5be6\u4f5c\uff0c\u66f4\u6539\u7a0b\u5f0f\u78bc\u5982\u4e0b\uff1a\\r\\n\\r\\n```js title=\\"main.js\\"\\r\\nconst root = ReactDOM.createRoot(document.getElementById(\\"root\\"));\\r\\nroot.render(\\r\\n  <React.StrictMode>\\r\\n    <HashRouter>\\r\\n      <App />\\r\\n    </HashRouter>\\r\\n  </React.StrictMode>\\r\\n);\\r\\n\\r\\n// APP \u5167\u5bb9\\r\\nfunction App() {\\r\\n  return (\\r\\n    <Routes>\\r\\n      <Route path=\\"/\\" element={<Login />}></Route>\\r\\n      <Route path=\\"/SignUp\\" element={<SignUp />}></Route>\\r\\n      <Route path=\\"/Todo\\" element={<Todo />}></Route>\\r\\n    </Routes>\\r\\n  );\\r\\n}\\r\\n```\\r\\n\\r\\n\u518d\u91cd\u65b0\u90e8\u5c6c\u5c31\u6210\u529f\u6709\u756b\u9762\u4e86\ud83c\udf89\\r\\n\u4e0d\u904e\u900f\u904e `HashRouter` \u7684\u65b9\u5f0f\u5be6\u73fe\uff0c\u7db2\u5740\u4e0a\u5c31\u6703\u5e36\u6709 `#`\\r\\n\\r\\n</details>\\r\\n\\r\\n## \u4f5c\u696d\u6210\u54c1\\r\\n[\ud83d\udcd5 \u516d\u89d2\u5b78\u9662 React \u7dda\u4e0a\u8b80\u66f8\u6703\u6700\u7d42\u4f5c\u696d](https://weij0.github.io/ReactOnlineTodo/)\\r\\n\\r\\n\u76ee\u524d\u662f\u7b2c\u4e00\u7248\u7684\u4f5c\u696d\uff0c\u4e4b\u5f8c\u6703\u5728\u53c3\u8003\u5176\u4ed6\u5b78\u54e1\u7684\u4f5c\u54c1\u4f86\u601d\u8003\u4e00\u4e0b\u8def\u7531\u53caAPI\u9019\u584a\u662f\u4e0d\u662f\u6709\u66f4\u597d\u7684\u4f5c\u6cd5"},{"id":"ReactHook_Form","metadata":{"permalink":"/Web/blog/ReactHook_Form","source":"@site/blog/20220809_ReactHook_Form.md","title":"React Hook-Form \u9001\u51fa\u4e8b\u4ef6 VS \u591a useState","description":"\u524d\u8a00","date":"2022-08-09T10:00:00.000Z","formattedDate":"August 9, 2022","tags":[{"label":"React Hook","permalink":"/Web/blog/tags/react-hook"}],"readingTime":2.73,"hasTruncateMarker":true,"authors":[{"name":"WeiJie","imageURL":"./photo.jpg","key":"wj"}],"frontMatter":{"slug":"ReactHook_Form","title":"React Hook-Form \u9001\u51fa\u4e8b\u4ef6 VS \u591a useState","authors":"wj","date":"2022-08-09T10:00","tags":["React Hook"]},"prevItem":{"title":"\u516d\u89d2\u5b78\u9662 React \u7dda\u4e0a\u8b80\u66f8\u6703\u5b78\u7fd2\u5fc3\u5f97","permalink":"/Web/blog/HexSchool_ReactStudy"},"nextItem":{"title":"\u7b46\u8a18--\u5e8f","permalink":"/Web/blog/first-blog-post"}},"content":"## \u524d\u8a00\\r\\n\\r\\n\u6700\u8fd1\u5728\u5b78\u7fd2 React Hook \u4e2d\u6709\u767c\u73fe\uff0c\u5728\u88fd\u4f5c\u8a3b\u518a\u8868\u55ae\u9019\u7a2e\u591a Input \u7684\u9801\u9762\u6642\\r\\n\\r\\n\u5f80\u5f80\u5c31\u9700\u8981\u5ba3\u544a\u8a31\u591a\u8b8a\u6578\u548c `useState()`\\r\\n\\r\\n```jsx\\r\\nconst [account, setAccount] = useState(\'\')\\r\\nconst [password, setPassword] = useState(\'\')\\r\\nconst [confirmPassword, setConfirmPassword] = useState(\'\')\\r\\nconst [name, setName] = useState(\'\')\\r\\nconst [email, setEmail] = useState(\'\')\\r\\nconst [phone, setPhone] = useState(\'\')\\r\\n\\r\\nreturn {(\\r\\n    <>\\r\\n        <input value={account} placeholder=\\"account\\"\\r\\n            onChange={e => setAccount(e.target.value)} />\\r\\n        <input value={password} placeholder=\\"password\\"\\r\\n            onChange={e => setPassword(e.target.value)} />\\r\\n        <input value={confirmPassword} placeholder=\\"password again\\"\\r\\n            onChange={e => setConfirmPassword(e.target.value)} />\\r\\n    </>\\r\\n)}\\r\\n...\\r\\n```\\r\\n\\r\\n\u5982\u679c\u53c8\u6709\u5730\u5740\u3001\u8f09\u5177\u3001\u611b\u5fc3\u78bc\u7b49\u7b49\u96fb\u5546\u7528\u7684\u6b04\u4f4d\uff0c\u8c48\u4e0d\u662f\u5149\u9019\u4e9b\u6771\u897f\u5c31\u5ba3\u544a\u4e86\u4e00\u5806\u8b8a\u6578  \\r\\n\u5beb\u4e86\u4e00\u5806 `onChange` \u4e8b\u4ef6\u4f7f\u7528\u4e0d\u540c\u7684 methods \u53bb\u4fee\u6539\u503c  \\r\\n\u7576\u6709\u4e86\u9019\u4e9b\u60f3\u6cd5\u4e4b\u5f8c\u5c31\u958b\u59cb\u518d\u60f3\u6709\u751a\u9ebc\u65b9\u6cd5\u53ef\u4ee5\u7c21\u5316\uff0c\u518d\u901b `DEV` \u7684\u6642\u5019\u5c31\u767c\u73fe\u4e86\u9019\u7bc7\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n[I was creating Forms the wrong way all along in React.js \ud83e\udd14](https://dev.to/kuvambhardwaj/i-was-creating-forms-the-wrong-way-all-along-in-reactjs-hl3)\\r\\n\\r\\n## \u65b9\u6cd5\\r\\n\\r\\n\u800c\u4f5c\u8005 Kuvam Bhardwaj \u63d0\u51fa\u7684\u65b9\u6cd5\u5c31\u662f\u5229\u7528 Html Form \u7684\u539f\u751f\u65b9\u6cd5\u4f86\u5feb\u901f\u53d6\u5f97\u9019\u4e9b\u6b04\u4f4d\\r\\n\\r\\n```jsx\\r\\nconst submitForm = (e) => {\\r\\n  e.preventDefault();\\r\\n  const formData = new FormData(e.target);\\r\\n  const inputObject = Object.fromEntries(formData);\\r\\n};\\r\\n\\r\\n<form onSubmit={submitForm}>\\r\\n  <input name=\\"account\\" placeholder=\\"account\\" />\\r\\n  <input name=\\"password\\" placeholder=\\"password\\" />\\r\\n  <input name=\\"confirmPassword\\" placeholder=\\"confirmPassword\\" />\\r\\n  <button type=\\"submit\\">\u9001\u51fa</button>\\r\\n</form>;\\r\\n```\\r\\n\\r\\n\u8207\u4e0a\u9762\u4e0d\u540c\u7684\u662f\uff0c\u6c92\u6709\u7279\u5225\u53bb\u91dd\u5c0d `Input` \u5ba3\u544a\u8b8a\u6578\uff0c\u6240\u4ee5\u4e5f\u4e0d\u9700\u8981\u6bcf\u500b\u6b04\u4f4d\u90fd\u53bb\u7d81\u5b9a `onChange` \u4e8b\u4ef6\uff0c\u4f46\u9700\u8981\u5b9a\u7fa9 `name` \u53bb\u7372\u5f97\\r\\n\\r\\n\u5728 `form` \u7684 `onSubmit` \u4e8b\u4ef6\u4e2d `e.target` \u662f\u6574\u500b `form` \u8868\u55ae\u7684\u5143\u7d20\\r\\n\\r\\n\u518d\u4f86\u5247\u662f\u4f7f\u7528 js \u4e2d\u7684 `FormData()` \u8f49\u63db\u70ba\u8868\u55ae\u7269\u4ef6  \\r\\n\u518d\u4f7f\u7528 `Object.fromEntriesI()` \u5c07\u8868\u55ae\u7269\u4ef6\u8f49\u63db\u70ba\u7269\u4ef6  \\r\\n\u9019\u500b\u7269\u4ef6\u5c31\u662f\u6240\u6709\u6b04\u4f4d\u586b\u5165\u7684 Value \u4e86\uff0c\u4e5f\u5c31\u662f\u4e0b\u9762\u7684 inputObject \\r\\n\\r\\n```js\\r\\nconst formData = new FormData(e.target);\\r\\nconsole.log(formData);\\r\\n// FormData {append: \u0192 append(), delete: \u0192 delete(),  get: \u0192 get(), \\r\\n//           getAll: \u0192 getAll(), has: \u0192 has()\u2026}\\r\\nconst inputObject = Object.fromEntries(formData);\\r\\nconsole.log(inputObject);\\r\\n// {\\r\\n//   account: \\"\u8f38\u5165\u7684 account\\", \\r\\n//   password: \\"\u8f38\u5165\u7684 password\\", \\r\\n//   confirmPassword: \\"\u8f38\u5165\u7684 confirmPassword\\"\\r\\n// }\\r\\n```\\r\\n\\r\\n[\u539f\u6587\u4f5c\u8005\u63d0\u4f9b\u7684 Sandbox](https://codesandbox.io/s/formdata-forked-ll8jbs?file=/src/App.js)  \\r\\n\u53ef\u4ee5\u900f\u904e\u539f\u6587\u4f5c\u8005\u63d0\u4f9b\u7684 Sandbox \u53bb\u5be6\u969b\u611f\u53d7\u4e00\u4e0b\u5169\u500b\u5beb\u6cd5\u7684\u5dee\u7570\\r\\n\\r\\n## \u7d50\u8ad6\\r\\n\\r\\n`onSubmit` \u7684\u65b9\u6cd5\u96d6\u7136\u4fbf\u5229\uff0c\u4f46\u4e5f\u50c5\u80fd\u7528\u4f86\u53d6\u5f97\u6240\u6709\u503c\uff0c\u82e5\u662f\u4f7f\u7528\u60c5\u5883\u662f\u9700\u8981\u6539\u8b8a `Input` \u503c\u7684\u8a71  \\r\\n\u9084\u662f\u5f97\u900f\u904e `onChange` \u91cd\u65b0\u6e32\u67d3\u7684\u65b9\u5f0f\u4f86\u9054\u6210\uff0c\u6240\u4ee5\u9084\u662f\u9700\u8981\u8a55\u4f30\u4e00\u4e0b\u4f7f\u7528\u60c5\u5883"},{"id":"first-blog-post","metadata":{"permalink":"/Web/blog/first-blog-post","source":"@site/blog/20220808_FirstPost.md","title":"\u7b46\u8a18--\u5e8f","description":"\u4e0d\u77e5\u4e0d\u89ba\u7684\u9032\u5165\u4e86\u5de5\u4f5c\u7684\u7b2c\u4e09\u500b\u5e74\u982d\uff0c","date":"2022-08-08T10:00:00.000Z","formattedDate":"August 8, 2022","tags":[],"readingTime":0.75,"hasTruncateMarker":false,"authors":[{"name":"WeiJie","imageURL":"./photo.jpg","key":"wj"}],"frontMatter":{"slug":"first-blog-post","title":"\u7b46\u8a18--\u5e8f","date":"2022-08-08T10:00","authors":"wj"},"prevItem":{"title":"React Hook-Form \u9001\u51fa\u4e8b\u4ef6 VS \u591a useState","permalink":"/Web/blog/ReactHook_Form"}},"content":"\u4e0d\u77e5\u4e0d\u89ba\u7684\u9032\u5165\u4e86\u5de5\u4f5c\u7684\u7b2c\u4e09\u500b\u5e74\u982d\uff0c\\r\\n\\r\\n\u611f\u89ba\u9084\u662f\u8edf\u9ad4\u524d\u7aef\u5c0f\u767d\u7684\u6211\u6bcf\u5929\u52aa\u529b\u7684\u6771\u5b78\u4e00\u9ede\u897f\u5b78\u4e00\u9ede\u7684\u6642\u523b\u9084\u6b77\u6b77\u5728\u76ee\uff0c\\r\\n\\r\\n\u8fd1\u671f\u6709\u60f3\u904e\u627e\u4e00\u4efd\u65b0\u7684\u5de5\u4f5c\u5f80\u65b0\u7684\u822a\u9053\u524d\u9032\uff0c\\r\\n\\r\\n\u4f46\u56de\u9867\u9019\u5169\u5e74\u7a76\u7adf\u5b78\u5230\u4e86\u4e9b\u4ec0\u9ebc\u53ef\u4ee5\u505a\u4e9b\u4ec0\u9ebc\uff0c\\r\\n\\r\\n\u8aaa\u5be6\u5728\u6709\u4e9b\u7a7a\u767d\uff0c\u65bc\u662f\u5c31\u60f3\u6548\u4eff\u4e00\u4e9b\u524d\u8f29\u958b\u4e00\u500b Blog \u8a18\u9304\u8457\u5de5\u4f5c\u6216\u5b78\u7fd2\u4e2d\u5b78\u5230\u4e86\u4ec0\u9ebc\u65b0\u77e5\\r\\n\\r\\n\u4e5f\u525b\u597d\u6700\u8fd1\u5728\u5b78\u7fd2 React \u6070\u5de7 Docusaurus \u5c31\u662f\u7528 React \u53bb\u7de8\u8f2f\u771f\u662f\u4e00\u8209\u5169\u5f97"}]}')}}]);