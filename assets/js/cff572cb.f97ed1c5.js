"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4901],{8395:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>m,toc:()=>l});var n=a(7462),o=(a(7294),a(3905));a(452);const r={title:"\u5c07Oracle\u4e2dLong Raw\u7528ashx\u8f38\u51fa",slug:"/ASPNET/Oracle_Long_Raw",tags:["\u7b46\u8a18"]},s=void 0,m={unversionedId:"ASPNET C#/Oracle_Long_Raw",id:"ASPNET C#/Oracle_Long_Raw",title:"\u5c07Oracle\u4e2dLong Raw\u7528ashx\u8f38\u51fa",description:"",source:"@site/docs/ASPNET C#/Oracle_Long_Raw.mdx",sourceDirName:"ASPNET C#",slug:"/ASPNET/Oracle_Long_Raw",permalink:"/Web/docs/ASPNET/Oracle_Long_Raw",draft:!1,tags:[{label:"\u7b46\u8a18",permalink:"/Web/docs/tags/\u7b46\u8a18"}],version:"current",frontMatter:{title:"\u5c07Oracle\u4e2dLong Raw\u7528ashx\u8f38\u51fa",slug:"/ASPNET/Oracle_Long_Raw",tags:["\u7b46\u8a18"]},sidebar:"tutorialSidebar",previous:{title:"\u95dc\u65bc\u9019\u88e1",permalink:"/Web/docs/intro"},next:{title:"\u8def\u7531\u610f\u5916\u78b0\u5230\u7cfb\u7d71\u4fdd\u7559\u5b57",permalink:"/Web/docs/ASPNET/Router_ReservedWords"}},p={},l=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u5efa\u7acb\u4e00\u652f ashx \u6a94",id:"\u5efa\u7acb\u4e00\u652f-ashx-\u6a94",level:2},{value:"\u5b8c\u6574\u7a0b\u5f0f\u78bc",id:"\u5b8c\u6574\u7a0b\u5f0f\u78bc",level:2}],i={toc:l};function c(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},i,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,o.kt)("p",null,"\u9019\u5e7e\u5929\u525b\u597d\u6709\u4e00\u500b\u9700\u6c42\u662f\u8981\u5b58\u53d6\u6703\u54e1\u7684\u7167\u7247\uff0c\u4ee5\u5f80\u90fd\u662f\u5728\u5f8c\u53f0\u4f3a\u670d\u5668\u7684\u67d0\u500b\u8cc7\u6599\u593e\uff0c\u53ea\u8981\u639b\u8f09\u865b\u64ec\u76ee\u9304\u5c31\u80fd\u5b8c\u6210",(0,o.kt)("br",{parentName:"p"}),"\n","\u4e0d\u904e\u9019\u6b21\u7cfb\u7d71\u662f\u5c07\u7167\u7247\u7528 Long Raw \u5b58\u5165 db\uff0c\u7b2c\u4e00\u6b21\u9047\u5230\u89ba\u5f97\u65b0\u9bae\uff0c\u4e5f\u9806\u4fbf\u7d00\u9304 C# \u5982\u4f55\u5c07\u4e8c\u9032\u5236\u7684\u8cc7\u6599\u518d\u8f49\u56de\u5716\u7247"),(0,o.kt)("h2",{id:"\u5efa\u7acb\u4e00\u652f-ashx-\u6a94"},"\u5efa\u7acb\u4e00\u652f ashx \u6a94"),(0,o.kt)("p",null,"ashx \u6a94\u5c31\u662f\u6c92\u6709\u756b\u9762\u7684 aspx \u6a94\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4f86\u81ea\u7531\u8f38\u51fa\u5404\u7a2e\u5f62\u5f0f\u7684\u8cc7\u6599\uff0c\u50cf\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"JSON")," \u548c\u9019\u6b21\u8981\u5be6\u4f5c\u7684\u5716\u7247\u6a94\u90fd\u53ef\u4ee5",(0,o.kt)("br",{parentName:"p"}),"\n","\u9996\u5148\u6703\u5148\u5b9a\u7fa9\u9019\u6b21\u8981\u8f38\u51fa\u7684\u8cc7\u6599 ContentType \u70ba\u4f55"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'context.Response.ClearContent();\ncontext.Response.ContentType = "image/Jpeg";\n')),(0,o.kt)("p",null,"\u63a5\u4e0b\u4f86\u5c31\u662f\u5f9e\u8cc7\u6599\u5eab\u53d6\u51fa Long Raw \u7684\u5167\u5bb9\u5c31\u4e0d\u5beb\u51fa\u4f86\uff0c\u66ab\u4e14\u4e00\u500b\u7528\u4e00\u500b\u8b8a\u6578 ",(0,o.kt)("inlineCode",{parentName:"p"},"PhotoImage")," \u5132\u5b58",(0,o.kt)("br",{parentName:"p"}),"\n","\u5c07\u4e8c\u9032\u5236\u8cc7\u6599\u8f49\u578b\u6210 ",(0,o.kt)("inlineCode",{parentName:"p"},"Byte[]")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},"Object PhotoImage = '\u4e8c\u9032\u5236\u8cc7\u6599...'\nByte[] img = (Byte[])PhotoImage;\n")),(0,o.kt)("p",null,"\u518d\u4f86\u7528 MemoryStream \u53ca Bitmap \u4f86\u7e6a\u88fd\u5716\u7247"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},"MemoryStream ms = new MemoryStream(img);\nBitmap bitmap = new Bitmap(ms);\nbitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);\n")),(0,o.kt)("p",null,"\u6700\u5f8c\u518d\u5c07 MemoryStream \u7528 BinaryWrite \u7684\u65b9\u5f0f\u8f38\u51fa\u5c31\u53ef\u4ee5\u4e86"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},"context.Response.BinaryWrite(ms.ToArray());\nbitmap.Dispose();\ncontext.Response.End();\n")),(0,o.kt)("h2",{id:"\u5b8c\u6574\u7a0b\u5f0f\u78bc"},"\u5b8c\u6574\u7a0b\u5f0f\u78bc"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},"public void ProcessRequest(HttpContext context)\n{\n    Object PhotoImage = '\u8cc7\u6599\u5eab\u8655\u7406\u53d6\u51fa\u4e8c\u9032\u5236\u8cc7\u6599'\n    Byte[] img = (Byte[])PhotoImage;\n\n    MemoryStream ms = new MemoryStream(img);\n    Bitmap bitmap = new Bitmap(ms);\n    bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);\n    context.Response.ClearContent();\n    context.Response.ContentType = \"image/Jpeg\";\n    context.Response.BinaryWrite(ms.ToArray());\n    bitmap.Dispose();\n    context.Response.End();\n}\n")))}c.isMDXComponent=!0}}]);