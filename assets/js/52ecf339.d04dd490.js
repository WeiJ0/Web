"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8752],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),o=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=o(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=o(a),c=l,k=m["".concat(p,".").concat(c)]||m[c]||d[c]||r;return a?n.createElement(k,i(i({ref:t},u),{},{components:a})):n.createElement(k,i({ref:t},u))}));function c(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:l,i[1]=s;for(var o=2;o<r;o++)i[o]=a[o];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),l=a(6010);const r="tabItem_Ymn6";function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,l.Z)(r,i),hidden:a},t)}},5488:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(7462),l=a(7294),r=a(6010),i=a(2389),s=a(7392),p=a(7094),o=a(2466);const u="tabList__CuJ",d="tabItem_LNqP";function m(e){var t,a;const{lazy:i,block:m,defaultValue:c,values:k,groupId:N,className:h}=e,b=l.Children.map(e.children,(e=>{if((0,l.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),f=null!=k?k:b.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),y=(0,s.l)(f,((e,t)=>e.value===t.value));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const g=null===c?c:null!=(t=null!=c?c:null==(a=b.find((e=>e.props.default)))?void 0:a.props.value)?t:b[0].props.value;if(null!==g&&!f.some((e=>e.value===g)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+f.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:v,setTabGroupChoices:j}=(0,p.U)(),[w,D]=(0,l.useState)(g),C=[],{blockElementScrollPositionUntilNextRender:E}=(0,o.o5)();if(null!=N){const e=v[N];null!=e&&e!==w&&f.some((t=>t.value===e))&&D(e)}const B=e=>{const t=e.currentTarget,a=C.indexOf(t),n=f[a].value;n!==w&&(E(t),D(n),null!=N&&j(N,String(n)))},T=e=>{var t;let a=null;switch(e.key){case"ArrowRight":{var n;const t=C.indexOf(e.currentTarget)+1;a=null!=(n=C[t])?n:C[0];break}case"ArrowLeft":{var l;const t=C.indexOf(e.currentTarget)-1;a=null!=(l=C[t])?l:C[C.length-1];break}}null==(t=a)||t.focus()};return l.createElement("div",{className:(0,r.Z)("tabs-container",u)},l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":m},h)},f.map((e=>{let{value:t,label:a,attributes:i}=e;return l.createElement("li",(0,n.Z)({role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,key:t,ref:e=>C.push(e),onKeyDown:T,onFocus:B,onClick:B},i,{className:(0,r.Z)("tabs__item",d,null==i?void 0:i.className,{"tabs__item--active":w===t})}),null!=a?a:t)}))),i?(0,l.cloneElement)(b.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):l.createElement("div",{className:"margin-top--md"},b.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function c(e){const t=(0,i.Z)();return l.createElement(m,(0,n.Z)({key:String(t)},e))}},9214:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>o});var n=a(7462),l=(a(7294),a(3905));a(5488),a(5162);const r={title:"Deta Base \u5fae\u578b NoSQL",sidebar_position:2,keywords:["Deta"],tags:["\u7b46\u8a18","deta"],description:"\u672c\u7bc7\u5c07\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 Node.js Experss \u4e32\u63a5 Deta Base \u5efa\u7acb\u4e00\u500b\u7c21\u55ae\u7684 TodoList API"},i=void 0,s={unversionedId:"Deta/Deta_Base",id:"Deta/Deta_Base",title:"Deta Base \u5fae\u578b NoSQL",description:"\u672c\u7bc7\u5c07\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 Node.js Experss \u4e32\u63a5 Deta Base \u5efa\u7acb\u4e00\u500b\u7c21\u55ae\u7684 TodoList API",source:"@site/docs/Deta/Deta_Base.mdx",sourceDirName:"Deta",slug:"/Deta/Deta_Base",permalink:"/Web/docs/Deta/Deta_Base",draft:!1,tags:[{label:"\u7b46\u8a18",permalink:"/Web/docs/tags/\u7b46\u8a18"},{label:"deta",permalink:"/Web/docs/tags/deta"}],version:"current",lastUpdatedAt:1667461676,formattedLastUpdatedAt:"Nov 3, 2022",sidebarPosition:2,frontMatter:{title:"Deta Base \u5fae\u578b NoSQL",sidebar_position:2,keywords:["Deta"],tags:["\u7b46\u8a18","deta"],description:"\u672c\u7bc7\u5c07\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 Node.js Experss \u4e32\u63a5 Deta Base \u5efa\u7acb\u4e00\u500b\u7c21\u55ae\u7684 TodoList API"},sidebar:"tutorialSidebar",previous:{title:"Deta\uff0cHeroku \u66ff\u4ee3\u65b9\u6848\u4e4b\u4e00",permalink:"/Web/docs/Deta/intro"},next:{title:"Deta Micros \u90e8\u5c6c Express \u7a0b\u5f0f",permalink:"/Web/docs/Deta/Deta_Micros"}},p={},o=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u5b89\u88dd SDK",id:"\u5b89\u88dd-sdk",level:2},{value:"\u53d6\u5f97 project key",id:"\u53d6\u5f97-project-key",level:2},{value:"\u5efa\u7acb\u8cc7\u6599\u96c6 &amp; \u65b0\u589e\u4e00\u7b46\u8cc7\u6599",id:"\u5efa\u7acb\u8cc7\u6599\u96c6--\u65b0\u589e\u4e00\u7b46\u8cc7\u6599",level:2},{value:"\u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5",id:"\u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5",level:2},{value:"\u65b0\u589e\u8cc7\u6599 put &amp; putMany &amp; insert",id:"\u65b0\u589e\u8cc7\u6599-put--putmany--insert",level:3},{value:"\u53d6\u5f97\u8cc7\u6599 get or fetch",id:"\u53d6\u5f97\u8cc7\u6599-get-or-fetch",level:3},{value:"\u66f4\u65b0\u8cc7\u6599 put &amp; update",id:"\u66f4\u65b0\u8cc7\u6599-put--update",level:3},{value:"\u522a\u9664\u8cc7\u6599 delete",id:"\u522a\u9664\u8cc7\u6599-delete",level:3},{value:"HTML API \u64cd\u4f5c",id:"html-api-\u64cd\u4f5c",level:2},{value:"URL \u7db2\u5740",id:"url-\u7db2\u5740",level:3},{value:"Header \u8a2d\u7f6e",id:"header-\u8a2d\u7f6e",level:3},{value:"API \u8cc7\u6599\u5eab\u64cd\u4f5c",id:"api-\u8cc7\u6599\u5eab\u64cd\u4f5c",level:2},{value:"\u65b0\u589e\u8cc7\u6599 put &amp; insert",id:"\u65b0\u589e\u8cc7\u6599-put--insert",level:3},{value:"\u53d6\u5f97\u8cc7\u6599 get &amp; query",id:"\u53d6\u5f97\u8cc7\u6599-get--query",level:3},{value:"\u66f4\u65b0\u8cc7\u6599 put &amp; update",id:"\u66f4\u65b0\u8cc7\u6599-put--update-1",level:3},{value:"\u522a\u9664\u8cc7\u6599 delete",id:"\u522a\u9664\u8cc7\u6599-delete-1",level:3}],u={toc:o};function d(e){let{components:t,...r}=e;return(0,l.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,l.kt)("p",null,"\u56e0\u70ba\u76ee\u524d\u7528\u5230\u7684\u90fd\u662f Node.js \u5c45\u591a\uff0c\u6240\u4ee5\u6587\u7ae0\u6703\u4ee5 Node \u70ba\u4e3b \uff0cpython \u53ef\u80fd\u8981\u81ea\u884c\u89c0\u770b",(0,l.kt)("a",{parentName:"p",href:"https://docs.deta.sh/docs/base/about"},"\u5b98\u65b9\u6587\u4ef6"),(0,l.kt)("br",{parentName:"p"}),"\n","\u524d\u7f6e\u4f5c\u696d\u6703\u9700\u8981\u5230 ",(0,l.kt)("a",{parentName:"p",href:"https://web.deta.sh/"},"Deta \u8a3b\u518a\u6703\u54e1"),"\uff0c\u6703\u9700\u8981\u5f8c\u53f0\u7684\u4e00\u4e9b Token \u6216\u662f Key\uff0c\u6e2c\u8a66\u4e0a\u53ef\u4ee5\u4f7f\u7528 Postman \u8f03\u70ba\u65b9\u4fbf"),(0,l.kt)("p",null,"\u5982\u679c\u8981\u4f7f\u7528 Node.js + Express.js \u67b6\u8a2d\u4f3a\u670d\u5668\u7684\u8a71\u53ef\u4ee5\u5f9e ",(0,l.kt)("a",{parentName:"p",href:"#%E5%AE%89%E8%A3%9D-sdk"},"\u5b89\u88dd SDK")," \u958b\u59cb\u5f80\u4e0b\u770b\uff0c\u82e5\u53ea\u8981\u4f7f\u7528 API \u529f\u80fd\u8acb\u5f9e ",(0,l.kt)("a",{parentName:"p",href:"#html-api-%E6%93%8D%E4%BD%9C"},"HTML API \u64cd\u4f5c"),"\u95b1\u8b80"),(0,l.kt)("h2",{id:"\u5b89\u88dd-sdk"},"\u5b89\u88dd SDK"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm install deta\nor\nyarn add deta\n")),(0,l.kt)("h2",{id:"\u53d6\u5f97-project-key"},"\u53d6\u5f97 project key"),(0,l.kt)("p",null,"\u65bc\u5f8c\u53f0\u5de6\u65b9\u5217\u8868\u6700\u4e0b\u9762\u9078\u64c7 project keys\uff0c\u7136\u5f8c\u6309\u4e0b ",(0,l.kt)("inlineCode",{parentName:"p"},"Create Key")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"project keys",src:a(4231).Z,width:"580",height:"330"}),"\n",(0,l.kt)("img",{alt:"project keys2",src:a(567).Z,width:"641",height:"255"})),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("inlineCode",{parentName:"p"},"project key")," \u50c5\u6703\u51fa\u73fe\u9019\u4e00\u6b21\uff0c\u6240\u4ee5\u9700\u8981\u628a key \u5b58\u4e0b\u4f86\uff0c\u95dc\u6389\u5c31\u53ea\u80fd\u91cd\u65b0\u7522\u751f\u4e86")),(0,l.kt)("h2",{id:"\u5efa\u7acb\u8cc7\u6599\u96c6--\u65b0\u589e\u4e00\u7b46\u8cc7\u6599"},"\u5efa\u7acb\u8cc7\u6599\u96c6 & \u65b0\u589e\u4e00\u7b46\u8cc7\u6599"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="index.js"',title:'"index.js"'},'const { Deta } = require("deta");\nconst deta = Deta("[project key]"); // [project key] \u9700\u65bc\u5f8c\u53f0\u65b0\u589e\nconst db = deta.Base("todos"); // [DB Name] \u53ef\u81ea\u5b9a\u7fa9\u540d\u7a31\n\nconst addTodo = async () => {\n  // deta_base \u7684\u64cd\u4f5c\u90fd\u9700\u8981\u4f7f\u7528 await \u6240\u4ee5\u9700\u8981\u5b9a\u7fa9 async function\n  await db.put({\n    // \u4f7f\u7528 put({\u5167\u5bb9}) \u65b9\u5f0f\u65b0\u589e\uff0c\u5f8c\u7e8c\u6703\u6709\u8a73\u7d30\u4ecb\u7d39\n    content: "\u5b78\u7fd2 Deta Base",\n    isFinished: false,\n  });\n};\naddTodo();\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title="cmd"',title:'"cmd"'},"node index\n")),(0,l.kt)("p",null,"\u57f7\u884c\u5f8c\u4e0d\u6703\u6709\u4ec0\u9ebc\u8a0a\u606f\uff0c\u4e0d\u904e\u5230\u5f8c\u53f0\u91cd\u65b0\u6574\u7406\u5c31\u767c\u73fe\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Bases"),"\u4e0b\u591a\u51fa\u525b\u525b\u5b9a\u7fa9\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"todos"),"\uff0c\u5728\u9ede\u64ca ",(0,l.kt)("inlineCode",{parentName:"p"},"todos")," \u5c31\u53ef\u4ee5\u770b\u5230\u8cc7\u6599",(0,l.kt)("br",{parentName:"p"}),"\n","\u9664\u4e86\u6211\u5011\u8f38\u5165\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"content")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"isFinished")," \u5916\uff0c\u9084\u6709\u7cfb\u7d71\u7522\u751f\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"key")," \u4f5c\u70ba\u552f\u4e00\u503c(ID)"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"base",src:a(407).Z,width:"806",height:"348"})),(0,l.kt)("h2",{id:"\u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5"},"\u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5"),(0,l.kt)("h3",{id:"\u65b0\u589e\u8cc7\u6599-put--putmany--insert"},"\u65b0\u589e\u8cc7\u6599 put & putMany & insert"),(0,l.kt)("p",null,"deta \u63d0\u4f9b\u5169\u7a2e\u65b9\u6cd5\u4f86\u64cd\u4f5c\u65b0\u589e\u8cc7\u6599\uff0c\u5169\u8005\u7684\u5dee\u5225\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"put")," \u80fd\u5920\u5feb\u901f\u7684\u5b58\u53d6\u8cc7\u6599\u5eab\uff0c",(0,l.kt)("br",{parentName:"p"}),"\n","\u82e5 key \u6c92\u6709\u91cd\u8907\u5c31\u6703\u65b0\u589e\u8cc7\u6599\uff0c\u82e5 key \u5df2\u5b58\u5728\u5c31\u6703\u8986\u84cb\u8cc7\u6599 (\u4fee\u6539\u7528)\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"insert")," \u5247\u662f\u65b0\u589e\u8cc7\u6599\uff0c\u4e0d\u904e\u82e5\u9047\u5230 key \u91cd\u8907\u5247\u6703\u5f15\u767c\u932f\u8aa4\uff0c\u4e14\u5176\u6548\u80fd\u4e5f\u662f\u9700\u8981 ",(0,l.kt)("strong",{parentName:"p"},"put \u7684\u5169\u500d\u6642\u9593"),(0,l.kt)("br",{parentName:"p"}),"\n","\u6240\u4ee5\u5b98\u65b9\u63a8\u85a6\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"put")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await db.put(data, key, option);\nawait db.insert(data, key, options);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"data ","[\u5fc5\u586b]"," \u50b3\u5165\u7684\u8cc7\u6599\uff0c\u53ef\u4ee5\u662f object \u3001string \u3001boolean \u3001array"),(0,l.kt)("li",{parentName:"ul"},"key \u552f\u4e00\u503c\uff0c\u53ef\u4ee5\u81ea\u884c\u6307\u5b9a\uff0c\u70ba string \u578b\u614b\uff0c\u82e5\u7a7a\u767d\u5247\u7531\u7cfb\u7d71\u81ea\u52d5\u7522\u751f"),(0,l.kt)("li",{parentName:"ul"},"option \u9078\u9805 ","[object]",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"expireIn \u65bc\u65b0\u589e\u5f8c\u5e7e\u79d2\u9418\u904e\u671f"),(0,l.kt)("li",{parentName:"ul"},"expireAt \u65bc\u6307\u5b9a\u65e5\u671f\u904e\u671f")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'await db.put({ content: "\u5b78\u7fd2 Deta Base", isFinished: false }, "", {\n  expireIn: 10,\n});\n// \u82e5\u6709 option \u9078\u9805\u53c8\u4ea4\u7531\u7cfb\u7d71\u7522\u751f key \u503c\uff0c\u5247\u9700\u8981\u5e36\u5165\u7a7a\u5b57\u4e32\u65bc key value\n')),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u8a2d\u7f6e\u904e\u671f\u79d2\u6578\u5f8c\u5f8c\u53f0\u6703\u51fa\u73fe\u904e\u671f\u6642\u9593\u6233\u7684\u6b04\u4f4d\uff0c\u800c 10 \u79d2\u5f8c\u91cd\u65b0 ",(0,l.kt)("inlineCode",{parentName:"p"},"Fetch")," \u8a72\u7b46\u5c31\u88ab\u522a\u9664\u4e86"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"base",src:a(5828).Z,width:"837",height:"252"})),(0,l.kt)("p",null,"\u800c\u9664\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"put")," \u5916\uff0c\u9084\u6709\u4e00\u500b ",(0,l.kt)("inlineCode",{parentName:"p"},"putMany")," \u53ef\u4ee5\u4e00\u6b21\u65b0\u589e\u6216\u4fee\u6539\u591a\u7b46\u7684\u8cc7\u6599\u9032\u8cc7\u6599\u5eab\uff0c\u9700\u8981\u4f7f\u7528\u9663\u5217\u64cd\u4f5c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'await db.put([\n  { content: "\u5b78\u7fd2 Deta Base", isFinished: false },\n  { content: "\u5beb Deta Base \u6559\u5b78\u6587\u4ef6", isFinished: false },\n]);\n')),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"\u53d6\u5f97\u8cc7\u6599-get-or-fetch"},"\u53d6\u5f97\u8cc7\u6599 get or fetch"),(0,l.kt)("p",null,"deta \u63d0\u4f9b\u5169\u7a2e\u65b9\u6cd5\u64cd\u4f5c\u53d6\u5f97\u8cc7\u6599\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"get")," \u9700\u8981\u586b\u5165 ",(0,l.kt)("inlineCode",{parentName:"p"},"key")," \u4f86\u53d6\u5f97\u7279\u5b9a\u503c",(0,l.kt)("br",{parentName:"p"}),"\n","\u800c ",(0,l.kt)("inlineCode",{parentName:"p"},"fetch")," \u5247\u662f\u53ef\u4ee5\u66f4\u5f48\u6027\u7684\u4e0b\u641c\u5c0b\u689d\u4ef6\uff0c\u82e5\u7121\u689d\u4ef6\u5247\u662f\u8fd4\u56de\u5168\u90e8\u503c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await db.get(key);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"key ","[\u5fc5\u586b]"," \u7a7a\u6703\u8fd4\u56de\u932f\u8aa4 : ",(0,l.kt)("strong",{parentName:"li"},"Key is empty"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await db.get('izwrljlo2h1p');\n\n//response\n{ content: '\u5b78\u7fd2 Deta Base', isFinished: false, key: 'izwrljlo2h1p' }\n")),(0,l.kt)("hr",null),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await db.fetch(query, options);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"query \u67e5\u8a62\u689d\u4ef6\uff0c\u82e5\u7a7a\u5247\u56de\u50b3\u6240\u6709\u8cc7\u6599\uff0c\u4f46\u6709 1MB \u7684\u9650\u5236\uff0c\u6240\u4ee5\u8d85\u904e\u9650\u5236\u5c31\u8981\u57f7\u884c\u591a\u6b21\u67e5\u8a62\uff0c",(0,l.kt)("br",{parentName:"li"}),"\u4e26\u4f7f\u7528 last \u9805\u76ee\u7d00\u9304\u4e0a\u6b21\u627e\u5230\u54ea\u88e1"),(0,l.kt)("li",{parentName:"ul"},"options \u9078\u9805 ","[object]",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"limit \u67e5\u8a62\u9805\u76ee\u7684\u9650\u5236\u503c\uff0c\u6700\u5c0f\u503c\u70ba 1"),(0,l.kt)("li",{parentName:"ul"},"last \u56de\u50b3\u4e0a\u4e00\u6b21\u67e5\u8a62\u6700\u5f8c\u4e00\u500b\u9805\u76ee\uff0c\u8b93\u7b2c\u4e8c\u6b21\u67e5\u8a62\u5f9e\u9019\u500b\u9805\u76ee\u5f80\u5f8c\u627e")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await db.fetch('key': 'izwrljlo2h1p')\n\n//response\n{\n   items: [\n    { content: '\u5b78\u7fd2 Deta Base', isFinished: false, key: 'izwrljlo2h1p' }\n   ],\n   count: 1,\n   last: undefined\n}\n// \u56e0\u70ba fetch \u53ef\u4ee5\u56de\u50b3\u591a\u7b46\u8cc7\u6599\uff0c\u6240\u4ee5\u6703\u88ab\u653e\u5728 items \u9663\u5217\u4e2d\uff0c\u7cfb\u7d71\u4e5f\u8cbc\u5fc3\u5730\u56de\u50b3\u7b46\u6578\uff0c\u53ca\u4e0a\u6b21\u627e\u5230\u54ea\u88e1\n\n")),(0,l.kt)("p",null,"\u5b98\u65b9\u7684\u7bc4\u4f8b\u53bb ",(0,l.kt)("inlineCode",{parentName:"p"},"fetch")," \u6240\u6709\u8cc7\u6599\uff0c\u4f46\u8cc7\u6599\u5927\u65bc 1mb"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"let res = await db.fetch();\nlet allItems = res.items;\n\n// \u5982\u679c\u524d\u4e00\u6b21\u67e5\u8a62 last \u56de\u50b3\u9084\u6709\u8cc7\u6599\u4ee3\u8868\u9700\u8981\u9032\u884c\u518d\u6b21\u67e5\u8a62\uff0c\u800c\u518d\u6b21\u67e5\u8a62\u5c31\u5f9e last \u9805\u76ee\u5f8c\u958b\u59cb\u627e\nwhile (res.last) {\n  // \u4f7f\u7528 while \u76f4\u5230 last \u56de\u50b3 undefined\n  res = await db.fetch({}, { last: res.last });\n  allItems = allItems.concat(res.items);\n}\n")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"\u66f4\u65b0\u8cc7\u6599-put--update"},"\u66f4\u65b0\u8cc7\u6599 put & update"),(0,l.kt)("p",null,"\u524d\u9762\u6709\u63d0\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"put")," \u5982\u679c\u9047\u5230 key \u503c\u76f8\u540c\u5c07\u8986\u84cb\u8a72\u8cc7\u6599\uff0c\u53ef\u4ee5\u505a\u5230\u66f4\u65b0\u8cc7\u6599\u7684\u529f\u80fd\uff0c\u53e6\u5916\u5247\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"update")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await db.update(updates, key, options);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"updates ","[\u5fc5\u586b]","\uff0c\u8981\u4fee\u6539\u7684\u5167\u5bb9\u5fc5\u9808\u4f7f\u7528\u9663\u5217\u5305\u88dd"),(0,l.kt)("li",{parentName:"ul"},"key ","[\u5fc5\u586b]","\uff0c\u8981\u4fee\u6539\u7684 key \u503c"),(0,l.kt)("li",{parentName:"ul"},"options \u5982\u524d\u9762 ",(0,l.kt)("inlineCode",{parentName:"li"},"put")," options"),(0,l.kt)("li",{parentName:"ul"},"update \u5c08\u5c6c\u7684\u64cd\u4f5c\u65b9\u6cd5",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Increment \u5c0d\u65bc\u539f\u8cc7\u6599\u6578\u5b57\u7684\u589e\u52a0 ",(0,l.kt)("inlineCode",{parentName:"li"},"base.util.increment(\u6578\u5b57)")),(0,l.kt)("li",{parentName:"ul"},"Append \u5c0d\u65bc\u539f\u8cc7\u6599\u9663\u5217\u9805\u76ee\u7684\u65b0\u589e(\u65b0\u589e\u5728\u5f8c) ",(0,l.kt)("inlineCode",{parentName:"li"},"base.util.append(\u5167\u5bb9)")),(0,l.kt)("li",{parentName:"ul"},"Prepend \u5c0d\u65bc\u539f\u8cc7\u6599\u9663\u5217\u9805\u76ee\u7684\u65b0\u589e(\u65b0\u589e\u5728\u524d) ",(0,l.kt)("inlineCode",{parentName:"li"},"base.util.prepend(\u5167\u5bb9)")),(0,l.kt)("li",{parentName:"ul"},"Trim \u79fb\u9664\u539f\u8cc7\u6599\u7684\u8a72\u6b04\u4f4d ",(0,l.kt)("inlineCode",{parentName:"li"},"base.util.trim()"))))),(0,l.kt)("p",null,"\u9019\u908a\u7528\u5b98\u65b9\u7684\u8209\u4f8b\u8aaa\u660e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=\"deta.Base('users')\"",title:"\"deta.Base('users')\""},'{\n  "key": "user-a",\n  "username": "jimmy",\n  "profile": {\n    "age": 32,\n    "active": false,\n    "hometown": "pittsburgh"\n  },\n  "on_mobile": true,\n  "likes": ["anime"],\n  "purchases": 1\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const updates = {\n  "profile.age": 33, // \u82e5\u539f\u8cc7\u6599\u6709\u8a72\u6b04\u4f4d\u5247\u66f4\u65b0\n  "profile.active": true, // \u82e5\u539f\u8cc7\u6599\u6709\u8a72\u6b04\u4f4d\u5247\u66f4\u65b0\n  "profile.email": "jimmy@deta.sh", // \u82e5\u539f\u8cc7\u6599\u7121\u6b04\u4f4d\u5247\u65b0\u589e\u8a72\u6b04\u4f4d\n  "profile.hometown": users.util.trim(), // \u79fb\u9664 profile.hometown \u6b04\u4f4d\n  "on_mobile": users.util.trim(), // // \u79fb\u9664 on_mobile \u6b04\u4f4d\n  "purchases": users.util.increment(2), // \u5c07\u539f\u672c purchases + 2\n  "likes": users.util.append("ramen") // \u5c07\u539f\u672c likes.push(\'ramen\')\n}\nconst res = await db.update(updates, "user-a");\n\n//response\n{\n  "key": "user-a",\n  "username": "jimmy",\n  "profile": {\n    "age": 33,\n    "active": true,\n    "email": "jimmy@deta.sh"\n  },\n  "likes": ["anime", "ramen"],\n  "purchases": 3\n}\n')),(0,l.kt)("h3",{id:"\u522a\u9664\u8cc7\u6599-delete"},"\u522a\u9664\u8cc7\u6599 delete"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await db.delete('izwrljlo2h1p');\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"html-api-\u64cd\u4f5c"},"HTML API \u64cd\u4f5c"),(0,l.kt)("h3",{id:"url-\u7db2\u5740"},"URL \u7db2\u5740"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-URL"},"https://database.deta.sh/v1/{project_id}/{base_name}\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"project_id")," \u4f4d\u65bc\u5f8c\u53f0\u7684 ",(0,l.kt)("strong",{parentName:"p"},"Project Keys")," \u9801\u9762\u53f3\u4e0a\u65b9\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"base_name")," \u5247\u70ba\u8cc7\u6599\u5eab\u540d\u7a31"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"project_id",src:a(6573).Z,width:"1910",height:"447"})),(0,l.kt)("h3",{id:"header-\u8a2d\u7f6e"},"Header \u8a2d\u7f6e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"AUTH \uff1a\u5b58\u53d6 API \u9700\u8981\u4f7f\u7528\u6388\u6b0a\u9a57\u8b49 ",(0,l.kt)("inlineCode",{parentName:"li"},"X-API-KEY: [project key]")),(0,l.kt)("li",{parentName:"ul"},"Content-Type: ",(0,l.kt)("inlineCode",{parentName:"li"},"application/json"))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"project key")," \u53d6\u5f97\u8acb\u53c3\u95b1 ",(0,l.kt)("a",{parentName:"p",href:"#%E5%8F%96%E5%BE%97-project-key"},"\u53d6\u5f97 project key")," "),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"postman",src:a(7220).Z,width:"972",height:"387"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'fetch("URL", {\n  headers: {\n    "X-API-Key": "project key",\n    "Content-type": "application/json",\n  },\n});\n')),(0,l.kt)("h2",{id:"api-\u8cc7\u6599\u5eab\u64cd\u4f5c"},"API \u8cc7\u6599\u5eab\u64cd\u4f5c"),(0,l.kt)("p",null,"\u57fa\u672c\u4e0a\u51fd\u6578\u8207\u4f7f\u7528 Node \u4f86\u57f7\u884c\u76f8\u540c\u3002"),(0,l.kt)("h3",{id:"\u65b0\u589e\u8cc7\u6599-put--insert"},"\u65b0\u589e\u8cc7\u6599 put & insert"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-PUT /items")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'// request\n{\n   "items": [\n        {\n            "key": {key}, //\u672a\u586b\u5247\u7cfb\u7d71\u7522\u751f\n            "content": "\u5b78\u7fd2 deta",\n            "isfinished": true\n        },\n        {\n            "key": {key}, //\u672a\u586b\u5247\u7cfb\u7d71\u7522\u751f\n            "content": "\u5beb deta \u6559\u5b78",\n            "isfinished": false\n        }\n    ]\n}\n\n// response 207\n{\n    "processed": {\n        "items": [\n           // \u6210\u529f\u9805\u76ee\n        ]\n    },\n    "failed": {\n       "items": [\n           // \u5931\u6557\u9805\u76ee\n       ]\n    }\n}\n')),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"\u53ef\u80fd\u5931\u6557\u539f\u56e0\u5982\u4e0b"),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},"key \u975e\u5b57\u4e32\uff0c\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"object"),",",(0,l.kt)("inlineCode",{parentName:"li"},"array"),",",(0,l.kt)("inlineCode",{parentName:"li"},"boolean")," , \u5169\u500b\u76f8\u540c\u7684 key"),(0,l.kt)("li",{parentName:"ul"},"items \u9663\u5217\u6700\u591a\u9805\u76ee\u70ba 25"),(0,l.kt)("li",{parentName:"ul"},"\u7e3d\u8acb\u6c42\u5927\u5c0f\u8d85\u904e\u9650\u5236 ",(0,l.kt)("inlineCode",{parentName:"li"},"16 MB")," \u6216 items \u55ae\u4e00\u9805\u76ee\u8d85\u904e ",(0,l.kt)("inlineCode",{parentName:"li"},"400KB")))),(0,l.kt)("h3",{id:"\u53d6\u5f97\u8cc7\u6599-get--query"},"\u53d6\u5f97\u8cc7\u6599 get & query"),(0,l.kt)("p",null,"get \u548c Node \u64cd\u4f5c\u4e00\u6a23\u900f\u904e\u50b3\u5165 key \u53d6\u5f97\u7279\u5b9a\u9805\u76ee"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-GET /items/{key}")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'//response\n{\n    "content": "\u5b78\u7fd2 Deta Base",\n    "isFinished": false,\n    "key": "izwrljlo2h1p"\n}\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-POST /query")),(0,l.kt)("p",null,"\u53c3\u6578\u8207 Node \u64cd\u4f5c\u76f8\u540c\uff0c\u53ef\u53c3\u8003 ",(0,l.kt)("a",{parentName:"p",href:"#%E5%8F%96%E5%BE%97%E8%B3%87%E6%96%99-get-or-fetch"},"\u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5 - \u53d6\u5f97\u8cc7\u6599-get or fetch")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'//request\n{\n   "query": [\n        {"user.hometown": "Berlin", "user.active": true},\n        {"user.age?lt": 40}\n   ],\n   "limit": 5,\n   "last": "afsefasd"\n}\n')),(0,l.kt)("h3",{id:"\u66f4\u65b0\u8cc7\u6599-put--update-1"},"\u66f4\u65b0\u8cc7\u6599 put & update"),(0,l.kt)("p",null,"\u53c3\u6578\u8207 Node \u64cd\u4f5c\u76f8\u540c\uff0c\u53ef\u53c3\u8003 ",(0,l.kt)("a",{parentName:"p",href:"#%E6%9B%B4%E6%96%B0%E8%B3%87%E6%96%99-put--update"},"\u8cc7\u6599\u5eab\u64cd\u4f5c\u65b9\u6cd5 - \u53d6\u5f97\u8cc7\u6599-get or fetch")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'{\n   "set" : { // \u8ce6\u4e88\u65b0\u503c\u653e\u5728 set object \u4e0b\u65b9\n     "profile.age": 33,\n     "profile.active": true,\n     "profile.email": "jimmy@deta.sh"\n   },\n\n   "increment" :{\n     "purchases": 2\n   },\n\n   "append": {\n     "likes": ["ramen"]\n   },\n   "delete": ["profile.hometown", "on_mobile"] // trim \u6539\u70ba delete\n}\n')),(0,l.kt)("h3",{id:"\u522a\u9664\u8cc7\u6599-delete-1"},"\u522a\u9664\u8cc7\u6599 delete"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-DELETE /items/{keys}")))}d.isMDXComponent=!0},6573:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/api1-81d06acd5fe955a52f9a5d0329bae212.png"},7220:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/api2-0bf85f04301051fc2115c58d01564211.png"},4231:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/detabase1-184e5d33e9ee57d2d83034de2b83206e.png"},567:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/detabase2-e5aae9208bf1ceec702b622f1b992f71.png"},407:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/detabase3-06111b26f5c6eebccb3a481caa5468ec.png"},5828:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/detabase4-adb1d4fe5732b62e74483a35eff5ed55.png"}}]);